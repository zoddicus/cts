{"version":3,"file":"maxVertexAttributes.spec.js","names":["kMaximumLimitBaseParams","makeLimitTestGroup","getPipelineDescriptor","device","lastIndex","code","module","createShaderModule","layout","vertex","entryPoint","buffers","arrayStride","attributes","shaderLocation","offset","format","limit","g","description","test","desc","params","combine","fn","t","limitTest","testValueName","async","testDeviceWithRequestedMaximumLimits","testValue","shouldError","pipelineDescriptor","testCreateRenderPipeline"],"sources":["../../../../../../src/webgpu/api/validation/capability_checks/limits/maxVertexAttributes.spec.ts"],"sourcesContent":["import { kMaximumLimitBaseParams, makeLimitTestGroup } from './limit_utils.js';\n\nfunction getPipelineDescriptor(device: GPUDevice, lastIndex: number): GPURenderPipelineDescriptor {\n  const code = `\n  @vertex fn vs(@location(${lastIndex}) v: vec4f) -> @builtin(position) vec4f {\n    return v;\n  }\n  `;\n  const module = device.createShaderModule({ code });\n  return {\n    layout: 'auto',\n    vertex: {\n      module,\n      entryPoint: 'vs',\n      buffers: [\n        {\n          arrayStride: 32,\n          attributes: [{ shaderLocation: lastIndex, offset: 0, format: 'float32x4' }],\n        },\n      ],\n    },\n  };\n}\n\nconst limit = 'maxVertexAttributes';\nexport const { g, description } = makeLimitTestGroup(limit);\n\ng.test('createRenderPipeline,at_over')\n  .desc(`Test using createRenderPipeline(Async) at and over ${limit} limit`)\n  .params(kMaximumLimitBaseParams.combine('async', [false, true]))\n  .fn(async t => {\n    const { limitTest, testValueName, async } = t.params;\n    await t.testDeviceWithRequestedMaximumLimits(\n      limitTest,\n      testValueName,\n      async ({ device, testValue, shouldError }) => {\n        const lastIndex = testValue - 1;\n        const pipelineDescriptor = getPipelineDescriptor(device, lastIndex);\n\n        await t.testCreateRenderPipeline(pipelineDescriptor, async, shouldError);\n      }\n    );\n  });\n"],"mappings":";AAAA;AAAA,GAAA,SAASA,uBAAuB,EAAEC,kBAAkB,QAAQ,kBAAkB,CAE9E,SAASC,qBAAqB,CAACC,MAAiB,EAAEC,SAAiB,EAA+B;EAChG,MAAMC,IAAI,GAAI;AAChB,4BAA4BD,SAAU;AACtC;AACA;AACA,GAAG;EACD,MAAME,MAAM,GAAGH,MAAM,CAACI,kBAAkB,CAAC,EAAEF,IAAI,CAAC,CAAC,CAAC;EAClD,OAAO;IACLG,MAAM,EAAE,MAAM;IACdC,MAAM,EAAE;MACNH,MAAM;MACNI,UAAU,EAAE,IAAI;MAChBC,OAAO,EAAE;MACP;QACEC,WAAW,EAAE,EAAE;QACfC,UAAU,EAAE,CAAC,EAAEC,cAAc,EAAEV,SAAS,EAAEW,MAAM,EAAE,CAAC,EAAEC,MAAM,EAAE,WAAW,CAAC,CAAC;MAC5E,CAAC;;IAEL;EACF,CAAC;AACH;;AAEA,MAAMC,KAAK,GAAG,qBAAqB;AACnC,OAAO,MAAM,EAAEC,CAAC,EAAEC,WAAW,CAAC,CAAC,GAAGlB,kBAAkB,CAACgB,KAAK,CAAC;;AAE3DC,CAAC,CAACE,IAAI,CAAC,8BAA8B,CAAC;AACnCC,IAAI,CAAE,sDAAqDJ,KAAM,QAAO,CAAC;AACzEK,MAAM,CAACtB,uBAAuB,CAACuB,OAAO,CAAC,OAAO,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;AAC/DC,EAAE,CAAC,OAAMC,CAAC,KAAI;EACb,MAAM,EAAEC,SAAS,EAAEC,aAAa,EAAEC,KAAK,CAAC,CAAC,GAAGH,CAAC,CAACH,MAAM;EACpD,MAAMG,CAAC,CAACI,oCAAoC;EAC1CH,SAAS;EACTC,aAAa;EACb,OAAO,EAAExB,MAAM,EAAE2B,SAAS,EAAEC,WAAW,CAAC,CAAC,KAAK;IAC5C,MAAM3B,SAAS,GAAG0B,SAAS,GAAG,CAAC;IAC/B,MAAME,kBAAkB,GAAG9B,qBAAqB,CAACC,MAAM,EAAEC,SAAS,CAAC;;IAEnE,MAAMqB,CAAC,CAACQ,wBAAwB,CAACD,kBAAkB,EAAEJ,KAAK,EAAEG,WAAW,CAAC;EAC1E,CAAC,CACF;;AACH,CAAC,CAAC"}