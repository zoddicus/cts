{"version":3,"file":"maxInterStageShaderVariables.spec.js","names":["kMaximumLimitBaseParams","makeLimitTestGroup","getPipelineDescriptor","device","testValue","code","module","createShaderModule","layout","vertex","entryPoint","limit","g","description","test","desc","params","combine","fn","t","limitTest","testValueName","async","testDeviceWithRequestedMaximumLimits","shouldError","lastIndex","pipelineDescriptor","testCreateRenderPipeline"],"sources":["../../../../../../src/webgpu/api/validation/capability_checks/limits/maxInterStageShaderVariables.spec.ts"],"sourcesContent":["import { kMaximumLimitBaseParams, makeLimitTestGroup } from './limit_utils.js';\n\nfunction getPipelineDescriptor(device: GPUDevice, testValue: number): GPURenderPipelineDescriptor {\n  const code = `\n    struct VSOut {\n      @builtin(position) p: vec4f,\n      @location(${testValue}) v: f32,\n    }\n    @vertex fn vs() -> VSOut {\n      var o: VSOut;\n      o.p = vec4f(0);\n      o.v = 1.0;\n      return o;\n    }\n  `;\n  const module = device.createShaderModule({ code });\n  return {\n    layout: 'auto',\n    vertex: {\n      module,\n      entryPoint: 'vs',\n    },\n  };\n}\n\nconst limit = 'maxInterStageShaderVariables';\nexport const { g, description } = makeLimitTestGroup(limit);\n\ng.test('createRenderPipeline,at_over')\n  .desc(`Test using at and over ${limit} limit in createRenderPipeline(Async)`)\n  .params(kMaximumLimitBaseParams.combine('async', [false, true]))\n  .fn(async t => {\n    const { limitTest, testValueName, async } = t.params;\n    await t.testDeviceWithRequestedMaximumLimits(\n      limitTest,\n      testValueName,\n      async ({ device, testValue, shouldError }) => {\n        const lastIndex = testValue - 1;\n        const pipelineDescriptor = getPipelineDescriptor(device, lastIndex);\n\n        await t.testCreateRenderPipeline(pipelineDescriptor, async, shouldError);\n      }\n    );\n  });\n"],"mappings":";AAAA;AAAA,GAAA,SAASA,uBAAuB,EAAEC,kBAAkB,QAAQ,kBAAkB,CAE9E,SAASC,qBAAqB,CAACC,MAAiB,EAAEC,SAAiB,EAA+B;EAChG,MAAMC,IAAI,GAAI;AAChB;AACA;AACA,kBAAkBD,SAAU;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;EACD,MAAME,MAAM,GAAGH,MAAM,CAACI,kBAAkB,CAAC,EAAEF,IAAI,CAAC,CAAC,CAAC;EAClD,OAAO;IACLG,MAAM,EAAE,MAAM;IACdC,MAAM,EAAE;MACNH,MAAM;MACNI,UAAU,EAAE;IACd;EACF,CAAC;AACH;;AAEA,MAAMC,KAAK,GAAG,8BAA8B;AAC5C,OAAO,MAAM,EAAEC,CAAC,EAAEC,WAAW,CAAC,CAAC,GAAGZ,kBAAkB,CAACU,KAAK,CAAC;;AAE3DC,CAAC,CAACE,IAAI,CAAC,8BAA8B,CAAC;AACnCC,IAAI,CAAE,0BAAyBJ,KAAM,uCAAsC,CAAC;AAC5EK,MAAM,CAAChB,uBAAuB,CAACiB,OAAO,CAAC,OAAO,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;AAC/DC,EAAE,CAAC,OAAMC,CAAC,KAAI;EACb,MAAM,EAAEC,SAAS,EAAEC,aAAa,EAAEC,KAAK,CAAC,CAAC,GAAGH,CAAC,CAACH,MAAM;EACpD,MAAMG,CAAC,CAACI,oCAAoC;EAC1CH,SAAS;EACTC,aAAa;EACb,OAAO,EAAElB,MAAM,EAAEC,SAAS,EAAEoB,WAAW,CAAC,CAAC,KAAK;IAC5C,MAAMC,SAAS,GAAGrB,SAAS,GAAG,CAAC;IAC/B,MAAMsB,kBAAkB,GAAGxB,qBAAqB,CAACC,MAAM,EAAEsB,SAAS,CAAC;;IAEnE,MAAMN,CAAC,CAACQ,wBAAwB,CAACD,kBAAkB,EAAEJ,KAAK,EAAEE,WAAW,CAAC;EAC1E,CAAC,CACF;;AACH,CAAC,CAAC"}