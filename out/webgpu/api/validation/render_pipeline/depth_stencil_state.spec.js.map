{"version":3,"file":"depth_stencil_state.spec.js","names":["description","makeTestGroup","unreachable","kCompareFunctions","kStencilOperations","kTextureFormats","kTextureFormatInfo","kDepthStencilFormats","getFragmentShaderCodeWithOutput","CreateRenderPipelineValidationTest","g","test","desc","params","u","combine","beforeAllSubcases","t","format","info","skipIfTextureFormatNotSupported","selectDeviceOrSkipTestCase","feature","fn","isAsync","descriptor","getDescriptor","depthStencil","depthWriteEnabled","depthCompare","doCreateRenderPipelineTest","depth","stencil","beginSubcases","undefined","depthTestEnabled","targets","fragmentShaderCode","values","plainType","componentCount","value","hasDepth","face","compare","stencilFront","stencilBack","stencilTestEnabled","faceAndOpType","op","common","failOp","depthFailOp","passOp","stencilWriteEnabled"],"sources":["../../../../../src/webgpu/api/validation/render_pipeline/depth_stencil_state.spec.ts"],"sourcesContent":["export const description = `\nThis test dedicatedly tests validation of GPUDepthStencilState of createRenderPipeline.\n`;\n\nimport { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { unreachable } from '../../../../common/util/util.js';\nimport { kCompareFunctions, kStencilOperations } from '../../../capability_info.js';\nimport { kTextureFormats, kTextureFormatInfo, kDepthStencilFormats } from '../../../format_info.js';\nimport { getFragmentShaderCodeWithOutput } from '../../../util/shader.js';\n\nimport { CreateRenderPipelineValidationTest } from './common.js';\n\nexport const g = makeTestGroup(CreateRenderPipelineValidationTest);\n\ng.test('format')\n  .desc(`The texture format in depthStencilState must be a depth/stencil format.`)\n  .params(u => u.combine('isAsync', [false, true]).combine('format', kTextureFormats))\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    const info = kTextureFormatInfo[format];\n    t.skipIfTextureFormatNotSupported(format);\n    t.selectDeviceOrSkipTestCase(info.feature);\n  })\n  .fn(t => {\n    const { isAsync, format } = t.params;\n    const info = kTextureFormatInfo[format];\n\n    const descriptor = t.getDescriptor({\n      depthStencil: { format, depthWriteEnabled: false, depthCompare: 'always' },\n    });\n\n    t.doCreateRenderPipelineTest(isAsync, !!info.depth || !!info.stencil, descriptor);\n  });\n\ng.test('depthCompare_optional')\n  .desc(\n    `The depthCompare in depthStencilState is optional for stencil-only formats but required for formats with a depth.`\n  )\n  .params(u =>\n    u\n      .combine('isAsync', [false, true])\n      .combine('format', kDepthStencilFormats)\n      .beginSubcases()\n      .combine('depthCompare', ['always', undefined] as const)\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    const info = kTextureFormatInfo[format];\n    t.skipIfTextureFormatNotSupported(format);\n    t.selectDeviceOrSkipTestCase(info.feature);\n  })\n  .fn(t => {\n    const { isAsync, format, depthCompare } = t.params;\n    const info = kTextureFormatInfo[format];\n    const descriptor = t.getDescriptor({\n      depthStencil: { format, depthCompare, depthWriteEnabled: false },\n    });\n\n    t.doCreateRenderPipelineTest(isAsync, !(info.depth && depthCompare === undefined), descriptor);\n  });\n\ng.test('depthWriteEnabled_optional')\n  .desc(\n    `The depthWriteEnabled in depthStencilState is optional for stencil-only formats but required for formats with a depth.`\n  )\n  .params(u => u.combine('isAsync', [false, true]).combine('format', kDepthStencilFormats))\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    const info = kTextureFormatInfo[format];\n    t.skipIfTextureFormatNotSupported(format);\n    t.selectDeviceOrSkipTestCase(info.feature);\n  })\n  .fn(t => {\n    const { isAsync, format } = t.params;\n    const info = kTextureFormatInfo[format];\n    const descriptor = t.getDescriptor({\n      depthStencil: { format, depthCompare: 'always', depthWriteEnabled: undefined },\n    });\n\n    t.doCreateRenderPipelineTest(isAsync, !info.depth, descriptor);\n  });\n\ng.test('depth_test')\n  .desc(\n    `Depth aspect must be contained in the format if depth test is enabled in depthStencilState.`\n  )\n  .params(u =>\n    u\n      .combine('isAsync', [false, true])\n      .combine('format', kDepthStencilFormats)\n      .combine('depthCompare', kCompareFunctions)\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    const info = kTextureFormatInfo[format];\n    t.selectDeviceOrSkipTestCase(info.feature);\n  })\n  .fn(t => {\n    const { isAsync, format, depthCompare } = t.params;\n    const info = kTextureFormatInfo[format];\n\n    const descriptor = t.getDescriptor({\n      depthStencil: { format, depthCompare, depthWriteEnabled: false },\n    });\n\n    const depthTestEnabled = depthCompare !== undefined && depthCompare !== 'always';\n    t.doCreateRenderPipelineTest(isAsync, !depthTestEnabled || !!info.depth, descriptor);\n  });\n\ng.test('depth_write')\n  .desc(\n    `Depth aspect must be contained in the format if depth write is enabled in depthStencilState.`\n  )\n  .params(u =>\n    u\n      .combine('isAsync', [false, true])\n      .combine('format', kDepthStencilFormats)\n      .combine('depthWriteEnabled', [false, true])\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    const info = kTextureFormatInfo[format];\n    t.selectDeviceOrSkipTestCase(info.feature);\n  })\n  .fn(t => {\n    const { isAsync, format, depthWriteEnabled } = t.params;\n    const info = kTextureFormatInfo[format];\n\n    const descriptor = t.getDescriptor({\n      depthStencil: { format, depthWriteEnabled, depthCompare: 'always' },\n    });\n    t.doCreateRenderPipelineTest(isAsync, !depthWriteEnabled || !!info.depth, descriptor);\n  });\n\ng.test('depth_write,frag_depth')\n  .desc(`Depth aspect must be contained in the format if frag_depth is written in fragment stage.`)\n  .params(u =>\n    u.combine('isAsync', [false, true]).combine('format', [undefined, ...kDepthStencilFormats])\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    if (format !== undefined) {\n      const info = kTextureFormatInfo[format];\n      t.selectDeviceOrSkipTestCase(info.feature);\n    }\n  })\n  .fn(t => {\n    const { isAsync, format } = t.params;\n\n    const descriptor = t.getDescriptor({\n      // Keep one color target so that the pipeline is still valid with no depth stencil target.\n      targets: [{ format: 'rgba8unorm' }],\n      depthStencil: format\n        ? { format, depthWriteEnabled: true, depthCompare: 'always' }\n        : undefined,\n      fragmentShaderCode: getFragmentShaderCodeWithOutput(\n        [{ values: [1, 1, 1, 1], plainType: 'f32', componentCount: 4 }],\n        { value: 0.5 }\n      ),\n    });\n\n    const hasDepth = format ? !!kTextureFormatInfo[format].depth : false;\n    t.doCreateRenderPipelineTest(isAsync, hasDepth, descriptor);\n  });\n\ng.test('stencil_test')\n  .desc(\n    `Stencil aspect must be contained in the format if stencil test is enabled in depthStencilState.`\n  )\n  .params(u =>\n    u\n      .combine('isAsync', [false, true])\n      .combine('format', kDepthStencilFormats)\n      .combine('face', ['front', 'back'] as const)\n      .combine('compare', [undefined, ...kCompareFunctions])\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    const info = kTextureFormatInfo[format];\n    t.selectDeviceOrSkipTestCase(info.feature);\n  })\n  .fn(t => {\n    const { isAsync, format, face, compare } = t.params;\n    const info = kTextureFormatInfo[format];\n\n    let descriptor: GPURenderPipelineDescriptor;\n    if (face === 'front') {\n      descriptor = t.getDescriptor({\n        depthStencil: {\n          format,\n          depthWriteEnabled: false,\n          depthCompare: 'always',\n          stencilFront: { compare },\n        },\n      });\n    } else {\n      descriptor = t.getDescriptor({\n        depthStencil: {\n          format,\n          depthWriteEnabled: false,\n          depthCompare: 'always',\n          stencilBack: { compare },\n        },\n      });\n    }\n\n    const stencilTestEnabled = compare !== undefined && compare !== 'always';\n    t.doCreateRenderPipelineTest(isAsync, !stencilTestEnabled || !!info.stencil, descriptor);\n  });\n\ng.test('stencil_write')\n  .desc(\n    `Stencil aspect must be contained in the format if stencil write is enabled in depthStencilState.`\n  )\n  .params(u =>\n    u\n      .combine('isAsync', [false, true])\n      .combine('format', kDepthStencilFormats)\n      .combine('faceAndOpType', [\n        'frontFailOp',\n        'frontDepthFailOp',\n        'frontPassOp',\n        'backFailOp',\n        'backDepthFailOp',\n        'backPassOp',\n      ] as const)\n      .combine('op', [undefined, ...kStencilOperations])\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    const info = kTextureFormatInfo[format];\n    t.selectDeviceOrSkipTestCase(info.feature);\n  })\n  .fn(t => {\n    const { isAsync, format, faceAndOpType, op } = t.params;\n    const info = kTextureFormatInfo[format];\n\n    const common = {\n      format,\n      depthWriteEnabled: false,\n      depthCompare: 'always' as GPUCompareFunction,\n    };\n    let depthStencil: GPUDepthStencilState;\n    switch (faceAndOpType) {\n      case 'frontFailOp':\n        depthStencil = { ...common, stencilFront: { failOp: op } };\n        break;\n      case 'frontDepthFailOp':\n        depthStencil = { ...common, stencilFront: { depthFailOp: op } };\n        break;\n      case 'frontPassOp':\n        depthStencil = { ...common, stencilFront: { passOp: op } };\n        break;\n      case 'backFailOp':\n        depthStencil = { ...common, stencilBack: { failOp: op } };\n        break;\n      case 'backDepthFailOp':\n        depthStencil = { ...common, stencilBack: { depthFailOp: op } };\n        break;\n      case 'backPassOp':\n        depthStencil = { ...common, stencilBack: { passOp: op } };\n        break;\n      default:\n        unreachable();\n    }\n    const descriptor = t.getDescriptor({ depthStencil });\n\n    const stencilWriteEnabled = op !== undefined && op !== 'keep';\n    t.doCreateRenderPipelineTest(isAsync, !stencilWriteEnabled || !!info.stencil, descriptor);\n  });\n"],"mappings":"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"}