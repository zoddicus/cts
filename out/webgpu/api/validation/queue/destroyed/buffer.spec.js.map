{"version":3,"file":"buffer.spec.js","names":["description","makeTestGroup","ValidationTest","g","test","desc","paramsSubcasesOnly","u","combine","fn","t","destroyed","params","buffer","trackForCleanup","device","createBuffer","size","usage","GPUBufferUsage","COPY_DST","destroy","expectValidationError","queue","writeBuffer","Uint8Array","src","COPY_SRC","dst","encoder","createCommandEncoder","copyBufferToBuffer","commandBuffer","finish","shouldError","submit","texture","createTexture","format","GPUTextureUsage","copyBufferToTexture","copyTextureToBuffer","encoderType","UNIFORM","layout","createBindGroupLayout","entries","binding","visibility","GPUShaderStage","COMPUTE","VERTEX","bindGroup","createBindGroup","resource","createEncoder","setBindGroup","vertexBuffer","setVertexBuffer","indexBuffer","INDEX","setIndexBuffer","querySet","createQuerySet","type","count","querySetBuffer","QUERY_RESOLVE","resolveQuerySet"],"sources":["../../../../../../src/webgpu/api/validation/queue/destroyed/buffer.spec.ts"],"sourcesContent":["export const description = `\nTests using a destroyed buffer on a queue.\n`;\n\nimport { makeTestGroup } from '../../../../../common/framework/test_group.js';\nimport { ValidationTest } from '../../validation_test.js';\n\nexport const g = makeTestGroup(ValidationTest);\n\ng.test('writeBuffer')\n  .desc(\n    `\nTests that using a destroyed buffer in writeBuffer fails.\n- x= {destroyed, not destroyed (control case)}\n  `\n  )\n  .paramsSubcasesOnly(u => u.combine('destroyed', [false, true] as const))\n  .fn(t => {\n    const { destroyed } = t.params;\n    const buffer = t.trackForCleanup(\n      t.device.createBuffer({\n        size: 4,\n        usage: GPUBufferUsage.COPY_DST,\n      })\n    );\n\n    if (destroyed) {\n      buffer.destroy();\n    }\n\n    t.expectValidationError(() => t.queue.writeBuffer(buffer, 0, new Uint8Array(4)), destroyed);\n  });\n\ng.test('copyBufferToBuffer')\n  .desc(\n    `\nTests that using a destroyed buffer in copyBufferToBuffer fails.\n- x= {not destroyed (control case), src destroyed, dst destroyed}\n  `\n  )\n  .paramsSubcasesOnly(u => u.combine('destroyed', ['none', 'src', 'dst', 'both'] as const))\n  .fn(t => {\n    const src = t.trackForCleanup(\n      t.device.createBuffer({ size: 4, usage: GPUBufferUsage.COPY_SRC })\n    );\n    const dst = t.trackForCleanup(\n      t.device.createBuffer({ size: 4, usage: GPUBufferUsage.COPY_DST })\n    );\n\n    const encoder = t.device.createCommandEncoder();\n    encoder.copyBufferToBuffer(src, 0, dst, 0, dst.size);\n    const commandBuffer = encoder.finish();\n\n    let shouldError = true;\n    switch (t.params.destroyed) {\n      case 'none':\n        shouldError = false;\n        break;\n      case 'src':\n        src.destroy();\n        break;\n      case 'dst':\n        dst.destroy();\n        break;\n      case 'both':\n        src.destroy();\n        dst.destroy();\n        break;\n    }\n\n    t.expectValidationError(() => {\n      t.queue.submit([commandBuffer]);\n    }, shouldError);\n  });\n\ng.test('copyBufferToTexture')\n  .desc(\n    `\nTests that using a destroyed buffer in copyBufferToTexture fails.\n- x= {not destroyed (control case), src destroyed}\n  `\n  )\n  .paramsSubcasesOnly(u => u.combine('destroyed', [false, true] as const))\n  .fn(t => {\n    const { destroyed } = t.params;\n    const buffer = t.trackForCleanup(\n      t.device.createBuffer({ size: 4, usage: GPUBufferUsage.COPY_SRC })\n    );\n    const texture = t.trackForCleanup(\n      t.device.createTexture({\n        size: [1, 1, 1],\n        format: 'rgba8unorm',\n        usage: GPUTextureUsage.COPY_DST,\n      })\n    );\n\n    const encoder = t.device.createCommandEncoder();\n    encoder.copyBufferToTexture({ buffer }, { texture }, [1, 1, 1]);\n    const commandBuffer = encoder.finish();\n\n    if (destroyed) {\n      buffer.destroy();\n    }\n\n    t.expectValidationError(() => {\n      t.queue.submit([commandBuffer]);\n    }, destroyed);\n  });\n\ng.test('copyTextureToBuffer')\n  .desc(\n    `\nTests that using a destroyed buffer in copyTextureToBuffer fails.\n- x= {not destroyed (control case), dst destroyed}\n  `\n  )\n  .paramsSubcasesOnly(u => u.combine('destroyed', [false, true] as const))\n  .fn(t => {\n    const { destroyed } = t.params;\n    const texture = t.trackForCleanup(\n      t.device.createTexture({\n        size: [1, 1, 1],\n        format: 'rgba8unorm',\n        usage: GPUTextureUsage.COPY_SRC,\n      })\n    );\n    const buffer = t.trackForCleanup(\n      t.device.createBuffer({ size: 4, usage: GPUBufferUsage.COPY_DST })\n    );\n\n    const encoder = t.device.createCommandEncoder();\n    encoder.copyTextureToBuffer({ texture }, { buffer }, [1, 1, 1]);\n    const commandBuffer = encoder.finish();\n\n    if (destroyed) {\n      buffer.destroy();\n    }\n\n    t.expectValidationError(() => {\n      t.queue.submit([commandBuffer]);\n    }, destroyed);\n  });\n\ng.test('setBindGroup')\n  .desc(\n    `\nTests that using a destroyed buffer referenced by a bindGroup set with setBindGroup fails\n- x= {not destroyed (control case), destroyed}\n    `\n  )\n  .paramsSubcasesOnly(u =>\n    u\n      .combine('destroyed', [false, true] as const)\n      .combine('encoderType', ['compute pass', 'render pass', 'render bundle'] as const)\n  )\n  .fn(t => {\n    const { destroyed, encoderType } = t.params;\n    const { device } = t;\n    const buffer = t.trackForCleanup(\n      t.device.createBuffer({\n        size: 4,\n        usage: GPUBufferUsage.UNIFORM,\n      })\n    );\n\n    const layout = device.createBindGroupLayout({\n      entries: [\n        {\n          binding: 0,\n          visibility: GPUShaderStage.COMPUTE | GPUShaderStage.VERTEX,\n          buffer: {},\n        },\n      ],\n    });\n\n    const bindGroup = device.createBindGroup({\n      layout,\n      entries: [{ binding: 0, resource: { buffer } }],\n    });\n\n    const { encoder, finish } = t.createEncoder(encoderType);\n    encoder.setBindGroup(0, bindGroup);\n    const commandBuffer = finish();\n\n    if (destroyed) {\n      buffer.destroy();\n    }\n\n    t.expectValidationError(() => {\n      t.queue.submit([commandBuffer]);\n    }, destroyed);\n  });\n\ng.test('setVertexBuffer')\n  .desc(\n    `\nTests that using a destroyed buffer referenced in a render pass fails\n- x= {not destroyed (control case), destroyed}\n    `\n  )\n  .paramsSubcasesOnly(u =>\n    u\n      .combine('destroyed', [false, true] as const)\n      .combine('encoderType', ['render pass', 'render bundle'] as const)\n  )\n  .fn(t => {\n    const { destroyed, encoderType } = t.params;\n    const vertexBuffer = t.trackForCleanup(\n      t.device.createBuffer({\n        size: 4,\n        usage: GPUBufferUsage.VERTEX,\n      })\n    );\n\n    const { encoder, finish } = t.createEncoder(encoderType);\n    encoder.setVertexBuffer(0, vertexBuffer);\n    const commandBuffer = finish();\n\n    if (destroyed) {\n      vertexBuffer.destroy();\n    }\n\n    t.expectValidationError(() => {\n      t.queue.submit([commandBuffer]);\n    }, destroyed);\n  });\n\ng.test('setIndexBuffer')\n  .desc(\n    `\nTests that using a destroyed buffer referenced in a render pass fails\n- x= {not destroyed (control case), destroyed}\n    `\n  )\n  .paramsSubcasesOnly(u =>\n    u\n      .combine('destroyed', [false, true] as const)\n      .combine('encoderType', ['render pass', 'render bundle'] as const)\n  )\n  .fn(t => {\n    const { destroyed, encoderType } = t.params;\n    const indexBuffer = t.trackForCleanup(\n      t.device.createBuffer({\n        size: 4,\n        usage: GPUBufferUsage.INDEX,\n      })\n    );\n\n    const { encoder, finish } = t.createEncoder(encoderType);\n    encoder.setIndexBuffer(indexBuffer, 'uint16');\n    const commandBuffer = finish();\n\n    if (destroyed) {\n      indexBuffer.destroy();\n    }\n\n    t.expectValidationError(() => {\n      t.queue.submit([commandBuffer]);\n    }, destroyed);\n  });\n\ng.test('resolveQuerySet')\n  .desc(\n    `\nTests that using a destroyed buffer referenced via resolveQuerySet fails\n- x= {not destroyed (control case), destroyed}\n    `\n  )\n  .paramsSubcasesOnly(u => u.combine('destroyed', [false, true] as const))\n  .fn(t => {\n    const { destroyed } = t.params;\n    const querySet = t.trackForCleanup(\n      t.device.createQuerySet({\n        type: 'occlusion',\n        count: 1,\n      })\n    );\n    const querySetBuffer = t.trackForCleanup(\n      t.device.createBuffer({\n        size: 8,\n        usage: GPUBufferUsage.QUERY_RESOLVE,\n      })\n    );\n\n    const encoder = t.device.createCommandEncoder();\n    encoder.resolveQuerySet(querySet, 0, 1, querySetBuffer, 0);\n    const commandBuffer = encoder.finish();\n\n    if (destroyed) {\n      querySetBuffer.destroy();\n    }\n\n    t.expectValidationError(() => {\n      t.queue.submit([commandBuffer]);\n    }, destroyed);\n  });\n"],"mappings":"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"}