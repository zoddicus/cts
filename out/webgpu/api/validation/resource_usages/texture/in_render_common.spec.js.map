{"version":3,"file":"in_render_common.spec.js","names":["description","makeTestGroup","assert","unreachable","ValidationTest","kTextureBindingTypes","IsReadOnlyTextureBindingType","t","F","getColorAttachment","texture","textureViewDescriptor","view","createView","clearValue","r","g","b","a","loadOp","storeOp","createBindGroupForTest","textureView","textureUsage","sampleType","bindGroupLayoutEntry","binding","visibility","GPUShaderStage","FRAGMENT","viewDimension","storageTexture","access","format","layout","device","createBindGroupLayout","entries","createBindGroup","resource","isRangeNotOverlapped","start0","end0","start1","end1","kTextureSize","kTextureLevels","kTextureLayers","test","desc","params","u","combine","unless","inSamePass","level0","level1","fn","layer0","layer1","createTextureTracked","usage","GPUTextureUsage","RENDER_ATTACHMENT","size","mipLevelCount","colorAttachment1","dimension","baseArrayLayer","arrayLayerCount","baseMipLevel","colorAttachment2","encoder","createCommandEncoder","renderPass","beginRenderPass","colorAttachments","end","renderPass1","renderPass2","success","expectValidationError","finish","combineWithParams","bgLevel","bgLevelCount","bgLayer","bgLayerCount","bgUsage","beforeAllSubcases","isCompatibility","skipIf","colorAttachmentLevel","colorAttachmentLayer","TEXTURE_BINDING","STORAGE_BINDING","bindGroupView","bindGroup","colorAttachment","setBindGroup","texture2","isMipLevelNotOverlapped","isArrayLayerNotOverlapped","isNotOverlapped","beginSubcases","dsLevel","dsLayer","depthReadOnly","stencilReadOnly","bgAspect","aspect","attachmentView","depthStencilAttachment","depthLoadOp","undefined","depthStoreOp","stencilLoadOp","stencilStoreOp","readonly","base","count","bgUsage0","bg0Levels","bgUsage1","bg1Levels","bg0Layers","bg1Layers","bg0","bg1","bindGroup0","bindGroup1","colorTexture","bothReadOnly","view0Layers","view1Layers","view0Levels","view1Levels","aspect0","aspect1","bindGroupView0","bindGroupView1","sampleType0","sampleType1"],"sources":["../../../../../../src/webgpu/api/validation/resource_usages/texture/in_render_common.spec.ts"],"sourcesContent":["export const description = `\nTexture Usages Validation Tests in Same or Different Render Pass Encoders.\n`;\n\nimport { makeTestGroup } from '../../../../../common/framework/test_group.js';\nimport { assert, unreachable } from '../../../../../common/util/util.js';\nimport { ValidationTest } from '../../validation_test.js';\n\nexport type TextureBindingType =\n  | 'sampled-texture'\n  | 'writeonly-storage-texture'\n  | 'readonly-storage-texture'\n  | 'readwrite-storage-texture';\nexport const kTextureBindingTypes = [\n  'sampled-texture',\n  'writeonly-storage-texture',\n  'readonly-storage-texture',\n  'readwrite-storage-texture',\n] as const;\nexport function IsReadOnlyTextureBindingType(t: TextureBindingType): boolean {\n  return t === 'sampled-texture' || t === 'readonly-storage-texture';\n}\n\nclass F extends ValidationTest {\n  getColorAttachment(\n    texture: GPUTexture,\n    textureViewDescriptor?: GPUTextureViewDescriptor\n  ): GPURenderPassColorAttachment {\n    const view = texture.createView(textureViewDescriptor);\n\n    return {\n      view,\n      clearValue: { r: 1.0, g: 0.0, b: 0.0, a: 1.0 },\n      loadOp: 'clear',\n      storeOp: 'store',\n    };\n  }\n\n  createBindGroupForTest(\n    textureView: GPUTextureView,\n    textureUsage: TextureBindingType,\n    sampleType: 'unfilterable-float' | 'depth' | 'uint'\n  ) {\n    const bindGroupLayoutEntry: GPUBindGroupLayoutEntry = {\n      binding: 0,\n      visibility: GPUShaderStage.FRAGMENT,\n    };\n    switch (textureUsage) {\n      case 'sampled-texture':\n        bindGroupLayoutEntry.texture = { viewDimension: '2d-array', sampleType };\n        break;\n      case 'readonly-storage-texture':\n        bindGroupLayoutEntry.storageTexture = {\n          access: 'read-only',\n          format: 'r32float',\n          viewDimension: '2d-array',\n        };\n        break;\n      case 'readwrite-storage-texture':\n        bindGroupLayoutEntry.storageTexture = {\n          access: 'read-write',\n          format: 'r32float',\n          viewDimension: '2d-array',\n        };\n        break;\n      case 'writeonly-storage-texture':\n        bindGroupLayoutEntry.storageTexture = {\n          access: 'write-only',\n          format: 'r32float',\n          viewDimension: '2d-array',\n        };\n        break;\n      default:\n        unreachable();\n        break;\n    }\n    const layout = this.device.createBindGroupLayout({\n      entries: [bindGroupLayoutEntry],\n    });\n    return this.device.createBindGroup({\n      layout,\n      entries: [{ binding: 0, resource: textureView }],\n    });\n  }\n\n  isRangeNotOverlapped(start0: number, end0: number, start1: number, end1: number): boolean {\n    assert(start0 <= end0 && start1 <= end1);\n    // There are only two possibilities for two non-overlapped ranges:\n    // [start0, end0] [start1, end1] or\n    // [start1, end1] [start0, end0]\n    return end0 < start1 || end1 < start0;\n  }\n}\n\nexport const g = makeTestGroup(F);\n\nconst kTextureSize = 16;\nconst kTextureLevels = 3;\nconst kTextureLayers = 3;\n\ng.test('subresources,color_attachments')\n  .desc(\n    `\n  Test that the different subresource of the same texture are allowed to be used as color\n  attachments in same / different render pass encoder, while the same subresource is only allowed\n  to be used as different color attachments in different render pass encoders.`\n  )\n  .params(u =>\n    u\n      .combine('layer0', [0, 1])\n      .combine('level0', [0, 1])\n      .combine('layer1', [0, 1])\n      .combine('level1', [0, 1])\n      .combine('inSamePass', [true, false])\n      .unless(t => t.inSamePass && t.level0 !== t.level1)\n  )\n  .fn(t => {\n    const { layer0, level0, layer1, level1, inSamePass } = t.params;\n\n    const texture = t.createTextureTracked({\n      format: 'r32float',\n      usage: GPUTextureUsage.RENDER_ATTACHMENT,\n      size: [kTextureSize, kTextureSize, kTextureLayers],\n      mipLevelCount: kTextureLevels,\n    });\n\n    const colorAttachment1 = t.getColorAttachment(texture, {\n      dimension: '2d',\n      baseArrayLayer: layer0,\n      arrayLayerCount: 1,\n      baseMipLevel: level0,\n      mipLevelCount: 1,\n    });\n    const colorAttachment2 = t.getColorAttachment(texture, {\n      dimension: '2d',\n      baseArrayLayer: layer1,\n      baseMipLevel: level1,\n      mipLevelCount: 1,\n    });\n    const encoder = t.device.createCommandEncoder();\n    if (inSamePass) {\n      const renderPass = encoder.beginRenderPass({\n        colorAttachments: [colorAttachment1, colorAttachment2],\n      });\n      renderPass.end();\n    } else {\n      const renderPass1 = encoder.beginRenderPass({\n        colorAttachments: [colorAttachment1],\n      });\n      renderPass1.end();\n      const renderPass2 = encoder.beginRenderPass({\n        colorAttachments: [colorAttachment2],\n      });\n      renderPass2.end();\n    }\n\n    const success = inSamePass ? layer0 !== layer1 : true;\n    t.expectValidationError(() => {\n      encoder.finish();\n    }, !success);\n  });\n\ng.test('subresources,color_attachment_and_bind_group')\n  .desc(\n    `\n  Test that when one subresource of a texture is used as a color attachment, it cannot be used in a\n  bind group simultaneously in the same render pass encoder. It is allowed when the bind group is\n  used in another render pass encoder instead of the same one.`\n  )\n  .params(u =>\n    u\n      .combine('colorAttachmentLevel', [0, 1])\n      .combine('colorAttachmentLayer', [0, 1])\n      .combineWithParams([\n        { bgLevel: 0, bgLevelCount: 1 },\n        { bgLevel: 1, bgLevelCount: 1 },\n        { bgLevel: 1, bgLevelCount: 2 },\n      ])\n      .combineWithParams([\n        { bgLayer: 0, bgLayerCount: 1 },\n        { bgLayer: 1, bgLayerCount: 1 },\n        { bgLayer: 1, bgLayerCount: 2 },\n        { bgLayer: 0, bgLayerCount: kTextureLayers },\n      ])\n      .combine('bgUsage', kTextureBindingTypes)\n      .unless(t => t.bgUsage !== 'sampled-texture' && t.bgLevelCount > 1)\n      .combine('inSamePass', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    if (t.isCompatibility) {\n      t.skipIf(t.params.bgLayer !== 0, 'view base array layer must equal 0 in compatibility mode');\n      t.skipIf(\n        t.params.bgLayerCount !== kTextureLayers,\n        'view array layers must equal texture array layers in compatibility mode'\n      );\n    }\n  })\n  .fn(t => {\n    const {\n      colorAttachmentLevel,\n      colorAttachmentLayer,\n      bgLevel,\n      bgLevelCount,\n      bgLayer,\n      bgLayerCount,\n      bgUsage,\n      inSamePass,\n    } = t.params;\n\n    const texture = t.createTextureTracked({\n      format: 'r32float',\n      usage:\n        GPUTextureUsage.RENDER_ATTACHMENT |\n        GPUTextureUsage.TEXTURE_BINDING |\n        GPUTextureUsage.STORAGE_BINDING,\n      size: [kTextureSize, kTextureSize, kTextureLayers],\n      mipLevelCount: kTextureLevels,\n    });\n    const bindGroupView = texture.createView({\n      dimension: '2d-array',\n      baseArrayLayer: bgLayer,\n      arrayLayerCount: bgLayerCount,\n      baseMipLevel: bgLevel,\n      mipLevelCount: bgLevelCount,\n    });\n    const bindGroup = t.createBindGroupForTest(bindGroupView, bgUsage, 'unfilterable-float');\n\n    const colorAttachment = t.getColorAttachment(texture, {\n      dimension: '2d',\n      baseArrayLayer: colorAttachmentLayer,\n      arrayLayerCount: 1,\n      baseMipLevel: colorAttachmentLevel,\n      mipLevelCount: 1,\n    });\n\n    const encoder = t.device.createCommandEncoder();\n    const renderPass = encoder.beginRenderPass({\n      colorAttachments: [colorAttachment],\n    });\n    if (inSamePass) {\n      renderPass.setBindGroup(0, bindGroup);\n      renderPass.end();\n    } else {\n      renderPass.end();\n\n      const texture2 = t.createTextureTracked({\n        format: 'r32float',\n        usage: GPUTextureUsage.RENDER_ATTACHMENT,\n        size: [kTextureSize, kTextureSize, 1],\n        mipLevelCount: 1,\n      });\n      const colorAttachment2 = t.getColorAttachment(texture2);\n      const renderPass2 = encoder.beginRenderPass({\n        colorAttachments: [colorAttachment2],\n      });\n      renderPass2.setBindGroup(0, bindGroup);\n      renderPass2.end();\n    }\n\n    const isMipLevelNotOverlapped = t.isRangeNotOverlapped(\n      colorAttachmentLevel,\n      colorAttachmentLevel,\n      bgLevel,\n      bgLevel + bgLevelCount - 1\n    );\n    const isArrayLayerNotOverlapped = t.isRangeNotOverlapped(\n      colorAttachmentLayer,\n      colorAttachmentLayer,\n      bgLayer,\n      bgLayer + bgLayerCount - 1\n    );\n    const isNotOverlapped = isMipLevelNotOverlapped || isArrayLayerNotOverlapped;\n\n    const success = inSamePass ? isNotOverlapped : true;\n    t.expectValidationError(() => {\n      encoder.finish();\n    }, !success);\n  });\n\ng.test('subresources,depth_stencil_attachment_and_bind_group')\n  .desc(\n    `\n  Test that when one subresource of a texture is used as a depth stencil attachment, it cannot be\n  used in a bind group simultaneously in the same render pass encoder. It is allowed when the bind\n  group is used in another render pass encoder instead of the same one, or the subresource is used\n  as a read-only depth stencil attachment.`\n  )\n  .params(u =>\n    u\n      .combine('dsLevel', [0, 1])\n      .combine('dsLayer', [0, 1])\n      .combineWithParams([\n        { bgLevel: 0, bgLevelCount: 1 },\n        { bgLevel: 1, bgLevelCount: 1 },\n        { bgLevel: 1, bgLevelCount: 2 },\n      ])\n      .combineWithParams([\n        { bgLayer: 0, bgLayerCount: 1 },\n        { bgLayer: 1, bgLayerCount: 1 },\n        { bgLayer: 1, bgLayerCount: 2 },\n        { bgLayer: 0, bgLayerCount: kTextureLayers },\n      ])\n      .beginSubcases()\n      .combine('depthReadOnly', [true, false])\n      .combine('stencilReadOnly', [true, false])\n      .combine('bgAspect', ['depth-only', 'stencil-only'] as const)\n      .combine('inSamePass', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    if (t.isCompatibility) {\n      t.skipIf(t.params.bgLayer !== 0, 'view base array layer must equal 0 in compatibility mode');\n      t.skipIf(\n        t.params.bgLayerCount !== kTextureLayers,\n        'view array layers must equal texture array layers in compatibility mode'\n      );\n    }\n  })\n  .fn(t => {\n    const {\n      dsLevel,\n      dsLayer,\n      bgLevel,\n      bgLevelCount,\n      bgLayer,\n      bgLayerCount,\n      depthReadOnly,\n      stencilReadOnly,\n      bgAspect,\n      inSamePass,\n    } = t.params;\n\n    const texture = t.createTextureTracked({\n      format: 'depth24plus-stencil8',\n      usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.TEXTURE_BINDING,\n      size: [kTextureSize, kTextureSize, kTextureLayers],\n      mipLevelCount: kTextureLevels,\n    });\n    const bindGroupView = texture.createView({\n      dimension: '2d-array',\n      baseArrayLayer: bgLayer,\n      arrayLayerCount: bgLayerCount,\n      baseMipLevel: bgLevel,\n      mipLevelCount: bgLevelCount,\n      aspect: bgAspect,\n    });\n    const sampleType = bgAspect === 'depth-only' ? 'depth' : 'uint';\n    const bindGroup = t.createBindGroupForTest(bindGroupView, 'sampled-texture', sampleType);\n\n    const attachmentView = texture.createView({\n      dimension: '2d',\n      baseArrayLayer: dsLayer,\n      arrayLayerCount: 1,\n      baseMipLevel: dsLevel,\n      mipLevelCount: 1,\n    });\n    const depthStencilAttachment: GPURenderPassDepthStencilAttachment = {\n      view: attachmentView,\n      depthReadOnly,\n      depthLoadOp: depthReadOnly ? undefined : 'load',\n      depthStoreOp: depthReadOnly ? undefined : 'store',\n      stencilReadOnly,\n      stencilLoadOp: stencilReadOnly ? undefined : 'load',\n      stencilStoreOp: stencilReadOnly ? undefined : 'store',\n    };\n\n    const encoder = t.device.createCommandEncoder();\n    const renderPass = encoder.beginRenderPass({\n      colorAttachments: [],\n      depthStencilAttachment,\n    });\n    if (inSamePass) {\n      renderPass.setBindGroup(0, bindGroup);\n      renderPass.end();\n    } else {\n      renderPass.end();\n\n      const texture2 = t.createTextureTracked({\n        format: 'rgba8unorm',\n        usage: GPUTextureUsage.RENDER_ATTACHMENT,\n        size: [kTextureSize, kTextureSize, 1],\n        mipLevelCount: 1,\n      });\n      const colorAttachment2 = t.getColorAttachment(texture2);\n      const renderPass2 = encoder.beginRenderPass({\n        colorAttachments: [colorAttachment2],\n      });\n      renderPass2.setBindGroup(0, bindGroup);\n      renderPass2.end();\n    }\n\n    const isMipLevelNotOverlapped = t.isRangeNotOverlapped(\n      dsLevel,\n      dsLevel,\n      bgLevel,\n      bgLevel + bgLevelCount - 1\n    );\n    const isArrayLayerNotOverlapped = t.isRangeNotOverlapped(\n      dsLayer,\n      dsLayer,\n      bgLayer,\n      bgLayer + bgLayerCount - 1\n    );\n    const isNotOverlapped = isMipLevelNotOverlapped || isArrayLayerNotOverlapped;\n    const readonly =\n      (bgAspect === 'stencil-only' && stencilReadOnly) ||\n      (bgAspect === 'depth-only' && depthReadOnly);\n\n    const success = !inSamePass || isNotOverlapped || readonly;\n    t.expectValidationError(() => {\n      encoder.finish();\n    }, !success);\n  });\n\ng.test('subresources,multiple_bind_groups')\n  .desc(\n    `\n  Test that when one color texture subresource is bound to different bind groups, its list of\n  internal usages within one usage scope can only be a compatible usage list. For texture\n  subresources in bind groups, the compatible usage lists are {TEXTURE_BINDING} and\n  {STORAGE_BINDING}, which means it can only be bound as both TEXTURE_BINDING and STORAGE_BINDING in\n  different render pass encoders, otherwise a validation error will occur.`\n  )\n  .params(u =>\n    u\n      .combine('bg0Levels', [\n        { base: 0, count: 1 },\n        { base: 1, count: 1 },\n        { base: 1, count: 2 },\n      ])\n      .combine('bg0Layers', [\n        { base: 0, count: 1 },\n        { base: 1, count: 1 },\n        { base: 1, count: 2 },\n        { base: 0, count: kTextureLayers },\n      ])\n      .combine('bg1Levels', [\n        { base: 0, count: 1 },\n        { base: 1, count: 1 },\n        { base: 1, count: 2 },\n      ])\n      .combine('bg1Layers', [\n        { base: 0, count: 1 },\n        { base: 1, count: 1 },\n        { base: 1, count: 2 },\n        { base: 0, count: kTextureLayers },\n      ])\n      .combine('bgUsage0', kTextureBindingTypes)\n      .combine('bgUsage1', kTextureBindingTypes)\n      .unless(\n        t =>\n          (t.bgUsage0 !== 'sampled-texture' && t.bg0Levels.count > 1) ||\n          (t.bgUsage1 !== 'sampled-texture' && t.bg1Levels.count > 1)\n      )\n      .beginSubcases()\n      .combine('inSamePass', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    if (t.isCompatibility) {\n      t.skipIf(\n        t.params.bg0Layers.base !== 0 || t.params.bg1Layers.base !== 0,\n        'view base array layer must equal 0 in compatibility mode'\n      );\n      t.skipIf(\n        t.params.bg0Layers.count !== kTextureLayers || t.params.bg1Layers.count !== kTextureLayers,\n        'view array layers must equal texture array layers in compatibility mode'\n      );\n    }\n  })\n  .fn(t => {\n    const { bg0Levels, bg0Layers, bg1Levels, bg1Layers, bgUsage0, bgUsage1, inSamePass } = t.params;\n\n    const texture = t.createTextureTracked({\n      format: 'r32float',\n      usage: GPUTextureUsage.STORAGE_BINDING | GPUTextureUsage.TEXTURE_BINDING,\n      size: [kTextureSize, kTextureSize, kTextureLayers],\n      mipLevelCount: kTextureLevels,\n    });\n    const bg0 = texture.createView({\n      dimension: '2d-array',\n      baseArrayLayer: bg0Layers.base,\n      arrayLayerCount: bg0Layers.count,\n      baseMipLevel: bg0Levels.base,\n      mipLevelCount: bg0Levels.count,\n    });\n    const bg1 = texture.createView({\n      dimension: '2d-array',\n      baseArrayLayer: bg1Layers.base,\n      arrayLayerCount: bg1Layers.count,\n      baseMipLevel: bg1Levels.base,\n      mipLevelCount: bg1Levels.count,\n    });\n    const bindGroup0 = t.createBindGroupForTest(bg0, bgUsage0, 'unfilterable-float');\n    const bindGroup1 = t.createBindGroupForTest(bg1, bgUsage1, 'unfilterable-float');\n\n    const colorTexture = t.createTextureTracked({\n      format: 'r32float',\n      usage: GPUTextureUsage.RENDER_ATTACHMENT,\n      size: [kTextureSize, kTextureSize, 1],\n      mipLevelCount: 1,\n    });\n    const colorAttachment = t.getColorAttachment(colorTexture);\n    const encoder = t.device.createCommandEncoder();\n    const renderPass = encoder.beginRenderPass({\n      colorAttachments: [colorAttachment],\n    });\n    if (inSamePass) {\n      renderPass.setBindGroup(0, bindGroup0);\n      renderPass.setBindGroup(1, bindGroup1);\n      renderPass.end();\n    } else {\n      renderPass.setBindGroup(0, bindGroup0);\n      renderPass.end();\n\n      const renderPass2 = encoder.beginRenderPass({\n        colorAttachments: [colorAttachment],\n      });\n      renderPass2.setBindGroup(1, bindGroup1);\n      renderPass2.end();\n    }\n\n    const bothReadOnly =\n      IsReadOnlyTextureBindingType(bgUsage0) && IsReadOnlyTextureBindingType(bgUsage1);\n    const isMipLevelNotOverlapped = t.isRangeNotOverlapped(\n      bg0Levels.base,\n      bg0Levels.base + bg0Levels.count - 1,\n      bg1Levels.base,\n      bg1Levels.base + bg1Levels.count - 1\n    );\n    const isArrayLayerNotOverlapped = t.isRangeNotOverlapped(\n      bg0Layers.base,\n      bg0Layers.base + bg0Layers.count - 1,\n      bg1Layers.base,\n      bg1Layers.base + bg1Layers.count - 1\n    );\n    const isNotOverlapped = isMipLevelNotOverlapped || isArrayLayerNotOverlapped;\n\n    const success = !inSamePass || bothReadOnly || isNotOverlapped || bgUsage0 === bgUsage1;\n    t.expectValidationError(() => {\n      encoder.finish();\n    }, !success);\n  });\n\ng.test('subresources,depth_stencil_texture_in_bind_groups')\n  .desc(\n    `\n  Test that when one depth stencil texture subresource is bound to different bind groups, we can\n  always bind these two bind groups in either the same or different render pass encoder as the depth\n  stencil texture can only be bound as TEXTURE_BINDING in the bind group.`\n  )\n  .params(u =>\n    u\n      .combine('view0Levels', [\n        { base: 0, count: 1 },\n        { base: 1, count: 1 },\n        { base: 1, count: 2 },\n      ])\n      .combine('view0Layers', [\n        { base: 0, count: 1 },\n        { base: 1, count: 1 },\n        { base: 1, count: 2 },\n        { base: 0, count: kTextureLayers },\n      ])\n      .combine('view1Levels', [\n        { base: 0, count: 1 },\n        { base: 1, count: 1 },\n        { base: 1, count: 2 },\n      ])\n      .combine('view1Layers', [\n        { base: 0, count: 1 },\n        { base: 1, count: 1 },\n        { base: 1, count: 2 },\n        { base: 0, count: kTextureLayers },\n      ])\n      .combine('aspect0', ['depth-only', 'stencil-only'] as const)\n      .combine('aspect1', ['depth-only', 'stencil-only'] as const)\n      .combine('inSamePass', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    if (t.isCompatibility) {\n      t.skipIf(\n        t.params.view0Layers.base !== 0 || t.params.view1Layers.base !== 0,\n        'view base array layer must equal 0 in compatibility mode'\n      );\n      t.skipIf(\n        t.params.view0Layers.count !== kTextureLayers ||\n          t.params.view1Layers.count !== kTextureLayers,\n        'view array layers must equal texture array layers in compatibility mode'\n      );\n    }\n  })\n  .fn(t => {\n    const { view0Levels, view0Layers, view1Levels, view1Layers, aspect0, aspect1, inSamePass } =\n      t.params;\n\n    const texture = t.createTextureTracked({\n      format: 'depth24plus-stencil8',\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n      size: [kTextureSize, kTextureSize, kTextureLayers],\n      mipLevelCount: kTextureLevels,\n    });\n    const bindGroupView0 = texture.createView({\n      dimension: '2d-array',\n      baseArrayLayer: view0Layers.base,\n      arrayLayerCount: view0Layers.count,\n      baseMipLevel: view0Levels.base,\n      mipLevelCount: view0Levels.count,\n      aspect: aspect0,\n    });\n    const bindGroupView1 = texture.createView({\n      dimension: '2d-array',\n      baseArrayLayer: view1Layers.base,\n      arrayLayerCount: view1Layers.count,\n      baseMipLevel: view1Levels.base,\n      mipLevelCount: view1Levels.count,\n      aspect: aspect1,\n    });\n\n    const sampleType0 = aspect0 === 'depth-only' ? 'depth' : 'uint';\n    const sampleType1 = aspect1 === 'depth-only' ? 'depth' : 'uint';\n    const bindGroup0 = t.createBindGroupForTest(bindGroupView0, 'sampled-texture', sampleType0);\n    const bindGroup1 = t.createBindGroupForTest(bindGroupView1, 'sampled-texture', sampleType1);\n\n    const colorTexture = t.createTextureTracked({\n      format: 'rgba8unorm',\n      usage: GPUTextureUsage.RENDER_ATTACHMENT,\n      size: [kTextureSize, kTextureSize, 1],\n      mipLevelCount: 1,\n    });\n    const colorAttachment = t.getColorAttachment(colorTexture);\n    const encoder = t.device.createCommandEncoder();\n    const renderPass = encoder.beginRenderPass({\n      colorAttachments: [colorAttachment],\n    });\n    if (inSamePass) {\n      renderPass.setBindGroup(0, bindGroup0);\n      renderPass.setBindGroup(1, bindGroup1);\n      renderPass.end();\n    } else {\n      renderPass.setBindGroup(0, bindGroup0);\n      renderPass.end();\n\n      const renderPass2 = encoder.beginRenderPass({\n        colorAttachments: [colorAttachment],\n      });\n      renderPass2.setBindGroup(1, bindGroup1);\n      renderPass2.end();\n    }\n\n    t.expectValidationError(() => {\n      encoder.finish();\n    }, false);\n  });\n"],"mappings":"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"}