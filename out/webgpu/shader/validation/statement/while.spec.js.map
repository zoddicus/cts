{"version":3,"file":"while.spec.js","names":["description","makeTestGroup","keysOf","ShaderValidationTest","kTestTypes","g","test","desc","params","u","combine","beforeAllSubcases","t","type","requires","selectDeviceOrSkipTestCase","fn","code","header","value","pass","expectCompileResult"],"sources":["../../../../../src/webgpu/shader/validation/statement/while.spec.ts"],"sourcesContent":["export const description = `Validation tests for 'while' statements'`;\n\nimport { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { keysOf } from '../../../../common/util/data_tables.js';\nimport { ShaderValidationTest } from '../shader_validation_test.js';\n\nimport { kTestTypes } from './test_types.js';\n\nexport const g = makeTestGroup(ShaderValidationTest);\n\ng.test('condition_type')\n  .desc(`Tests that a 'while' condition must be a bool type`)\n  .params(u => u.combine('type', keysOf(kTestTypes)))\n  .beforeAllSubcases(t => {\n    if (kTestTypes[t.params.type].requires === 'f16') {\n      t.selectDeviceOrSkipTestCase('shader-f16');\n    }\n  })\n  .fn(t => {\n    const type = kTestTypes[t.params.type];\n    const code = `\n${type.requires ? `enable ${type.requires};` : ''}\n\n${type.header ?? ''}\n\nfn f() -> bool {\n  while (${type.value}) {\n    return true;\n  }\n  return false;\n}\n`;\n\n    const pass = t.params.type === 'bool';\n    t.expectCompileResult(pass, code);\n  });\n"],"mappings":";;GAAA,OAAO,MAAMA,WAAW,GAAI,0CAAyC,CAErE,SAASC,aAAa,QAAQ,4CAA4C;AAC1E,SAASC,MAAM,QAAQ,wCAAwC;AAC/D,SAASC,oBAAoB,QAAQ,8BAA8B;;AAEnE,SAASC,UAAU,QAAQ,iBAAiB;;AAE5C,OAAO,MAAMC,CAAC,GAAGJ,aAAa,CAACE,oBAAoB,CAAC;;AAEpDE,CAAC,CAACC,IAAI,CAAC,gBAAgB,CAAC;AACrBC,IAAI,CAAE,oDAAmD,CAAC;AAC1DC,MAAM,CAAC,CAAAC,CAAC,KAAIA,CAAC,CAACC,OAAO,CAAC,MAAM,EAAER,MAAM,CAACE,UAAU,CAAC,CAAC,CAAC;AAClDO,iBAAiB,CAAC,CAAAC,CAAC,KAAI;EACtB,IAAIR,UAAU,CAACQ,CAAC,CAACJ,MAAM,CAACK,IAAI,CAAC,CAACC,QAAQ,KAAK,KAAK,EAAE;IAChDF,CAAC,CAACG,0BAA0B,CAAC,YAAY,CAAC;EAC5C;AACF,CAAC,CAAC;AACDC,EAAE,CAAC,CAAAJ,CAAC,KAAI;EACP,MAAMC,IAAI,GAAGT,UAAU,CAACQ,CAAC,CAACJ,MAAM,CAACK,IAAI,CAAC;EACtC,MAAMI,IAAI,GAAI;AAClB,EAAEJ,IAAI,CAACC,QAAQ,GAAI,UAASD,IAAI,CAACC,QAAS,GAAE,GAAG,EAAG;AAClD;AACA,EAAED,IAAI,CAACK,MAAM,IAAI,EAAG;AACpB;AACA;AACA,WAAWL,IAAI,CAACM,KAAM;AACtB;AACA;AACA;AACA;AACA,CAAC;;EAEG,MAAMC,IAAI,GAAGR,CAAC,CAACJ,MAAM,CAACK,IAAI,KAAK,MAAM;EACrCD,CAAC,CAACS,mBAAmB,CAACD,IAAI,EAAEH,IAAI,CAAC;AACnC,CAAC,CAAC"}