{"version":3,"file":"continue.spec.js","names":["description","makeTestGroup","keysOf","ShaderValidationTest","g","kTests","continue","src","pass","compound_continue","loop_continue","while_continue","for_continue","continuing_continue","continuing_nested_loop_continue","if_continue","nested_if_continue","switch_case_continue","nested_switch_case_continue","return_continue","loop_continue_after_decl_used_in_continuing","loop_continue_before_decl_used_in_continuing","loop_continue_before_decl_not_used_in_continuing","loop_nested_continue_before_decl_used_in_continuing","loop_continue_expression","for_init_continue","for_condition_continue","for_continue_continue","test","desc","params","u","combine","fn","t","code","stmt","expectCompileResult"],"sources":["../../../../../src/webgpu/shader/validation/statement/continue.spec.ts"],"sourcesContent":["export const description = `Validation tests for continue`;\n\nimport { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { keysOf } from '../../../../common/util/data_tables.js';\nimport { ShaderValidationTest } from '../shader_validation_test.js';\n\nexport const g = makeTestGroup(ShaderValidationTest);\n\nconst kTests = {\n  continue: {\n    src: 'continue;',\n    pass: false,\n  },\n  compound_continue: {\n    src: '{ continue; }',\n    pass: false,\n  },\n  loop_continue: {\n    src: 'loop { if false { break; } continue; }',\n    pass: true,\n  },\n  while_continue: {\n    src: 'while true { continue; }',\n    pass: true,\n  },\n  for_continue: {\n    src: 'for (;true;) { continue; }',\n    pass: true,\n  },\n  continuing_continue: {\n    src: 'loop { continuing { continue; } }',\n    pass: false,\n  },\n  continuing_nested_loop_continue: {\n    src: 'loop { if false { break; } continuing { loop { if false { break; } continue; } } }',\n    pass: true,\n  },\n  if_continue: {\n    src: 'if true { continue; }',\n    pass: false,\n  },\n  nested_if_continue: {\n    src: 'while true { if true { continue; } }',\n    pass: true,\n  },\n  switch_case_continue: {\n    src: 'switch(1) { default: { continue; } }',\n    pass: false,\n  },\n  nested_switch_case_continue: {\n    src: 'while true { switch(1) { default: { continue; } } }',\n    pass: true,\n  },\n  return_continue: {\n    src: 'return continue;',\n    pass: false,\n  },\n  loop_continue_after_decl_used_in_continuing: {\n    src: 'loop { let cond = false; continue; continuing { break if cond; } }',\n    pass: true,\n  },\n  loop_continue_before_decl_used_in_continuing: {\n    src: 'loop { continue; let cond = false; continuing { break if cond; } }',\n    pass: false,\n  },\n  loop_continue_before_decl_not_used_in_continuing: {\n    src: 'loop { continue; let cond = false; continuing { break if false; } }',\n    pass: true,\n  },\n  loop_nested_continue_before_decl_used_in_continuing: {\n    src: 'loop { if false { continue; } let cond = false; continuing { break if cond; } }',\n    pass: false,\n  },\n  loop_continue_expression: {\n    src: 'loop { if false { break; } continue true; }',\n    pass: false,\n  },\n  for_init_continue: {\n    src: 'for (continue;;) { break; }',\n    pass: false,\n  },\n  for_condition_continue: {\n    src: 'for (;continue;) { break; }',\n    pass: false,\n  },\n  for_continue_continue: {\n    src: 'for (;;continue) { break; }',\n    pass: false,\n  },\n};\n\ng.test('placement')\n  .desc('Test that continue placement is validated correctly')\n  .params(u => u.combine('stmt', keysOf(kTests)))\n  .fn(t => {\n    const code = `\n@vertex\nfn vtx() -> @builtin(position) vec4f {\n  ${kTests[t.params.stmt].src}\n  return vec4f(1);\n}\n    `;\n    t.expectCompileResult(kTests[t.params.stmt].pass, code);\n  });\n\ng.test('module_scope')\n  .desc('Test that continue is not valid at module-scope.')\n  .fn(t => {\n    const code = `\ncontinue;\n    `;\n    t.expectCompileResult(false, code);\n  });\n"],"mappings":"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"}