{"version":3,"file":"textureSampleBias.spec.js","names":["builtin","description","makeTestGroup","keysOf","objectsToRecord","Type","kAllScalarsAndVectors","isConvertible","isUnsignedType","scalarTypeOf","isFloatType","ShaderValidationTest","kEntryPointsToValidateFragmentOnlyBuiltins","kValidTextureSampleBiasParameterTypes","coordsArgType","vec2f","offsetArgType","vec2i","hasArrayIndexArg","vec3f","vec3i","kTextureTypes","kValuesTypes","g","test","specURL","desc","params","u","combine","beginSubcases","filter","t","coordType","value","expand","textureType","fn","offset","coordArgType","coordsRequiredType","coordWGSL","create","wgsl","arrayWGSL","offsetWGSL","code","expectSuccess","expectCompileResult","arrayIndexType","arrayIndexArgType","args","map","arg","join","i32","u32","biasType","Number","isInteger","biasArgType","biasWGSL","f32","offsetType","offsetRequiredType","varType","entryPoint","config"],"sources":["../../../../../../../src/webgpu/shader/validation/expression/call/builtin/textureSampleBias.spec.ts"],"sourcesContent":["const builtin = 'textureSampleBias';\nexport const description = `\nValidation tests for the ${builtin}() builtin.\n\n* test textureSampleBias coords parameter must be correct type\n* test textureSampleBias array_index parameter must be correct type\n* test textureSampleBias bias parameter must be correct type\n* test textureSampleBias bias parameter must be between -16.0 and 15.99 inclusive if it's a constant\n* test textureSampleBias offset parameter must be correct type\n* test textureSampleBias offset parameter must be a const-expression\n* test textureSampleBias offset parameter must be between -8 and +7 inclusive\n\nnote: uniformity validation is covered in src/webgpu/shader/validation/uniformity/uniformity.spec.ts\n`;\n\nimport { makeTestGroup } from '../../../../../../common/framework/test_group.js';\nimport { keysOf, objectsToRecord } from '../../../../../../common/util/data_tables.js';\nimport {\n  Type,\n  kAllScalarsAndVectors,\n  isConvertible,\n  ScalarType,\n  VectorType,\n  isUnsignedType,\n  scalarTypeOf,\n  isFloatType,\n} from '../../../../../util/conversion.js';\nimport { ShaderValidationTest } from '../../../shader_validation_test.js';\n\nimport { kEntryPointsToValidateFragmentOnlyBuiltins } from './shader_builtin_utils.js';\n\ntype TextureSampleBiasArguments = {\n  coordsArgType: ScalarType | VectorType;\n  hasArrayIndexArg?: boolean;\n  offsetArgType?: VectorType;\n};\n\nconst kValidTextureSampleBiasParameterTypes: { [n: string]: TextureSampleBiasArguments } = {\n  'texture_2d<f32>': { coordsArgType: Type.vec2f, offsetArgType: Type.vec2i },\n  'texture_2d_array<f32>': {\n    coordsArgType: Type.vec2f,\n    hasArrayIndexArg: true,\n    offsetArgType: Type.vec2i,\n  },\n  'texture_3d<f32>': { coordsArgType: Type.vec3f, offsetArgType: Type.vec3i },\n  'texture_cube<f32>': { coordsArgType: Type.vec3f },\n  'texture_cube_array<f32>': { coordsArgType: Type.vec3f, hasArrayIndexArg: true },\n} as const;\n\nconst kTextureTypes = keysOf(kValidTextureSampleBiasParameterTypes);\nconst kValuesTypes = objectsToRecord(kAllScalarsAndVectors);\n\nexport const g = makeTestGroup(ShaderValidationTest);\n\ng.test('coords_argument')\n  .specURL('https://gpuweb.github.io/gpuweb/wgsl/#texturesamplebias')\n  .desc(\n    `\nValidates that only incorrect coords arguments are rejected by ${builtin}\n`\n  )\n  .params(u =>\n    u\n      .combine('textureType', keysOf(kValidTextureSampleBiasParameterTypes))\n      .combine('coordType', keysOf(kValuesTypes))\n      .beginSubcases()\n      .combine('value', [-1, 0, 1] as const)\n      // filter out unsigned types with negative values\n      .filter(t => !isUnsignedType(kValuesTypes[t.coordType]) || t.value >= 0)\n      .expand('offset', t =>\n        kValidTextureSampleBiasParameterTypes[t.textureType].offsetArgType ? [false, true] : [false]\n      )\n  )\n  .fn(t => {\n    const { textureType, coordType, offset, value } = t.params;\n    const coordArgType = kValuesTypes[coordType];\n    const {\n      offsetArgType,\n      coordsArgType: coordsRequiredType,\n      hasArrayIndexArg,\n    } = kValidTextureSampleBiasParameterTypes[textureType];\n\n    const coordWGSL = coordArgType.create(value).wgsl();\n    const arrayWGSL = hasArrayIndexArg ? ', 0' : '';\n    const offsetWGSL = offset ? `, ${offsetArgType?.create(0).wgsl()}` : '';\n\n    const code = `\n@group(0) @binding(0) var s: sampler;\n@group(0) @binding(1) var t: ${textureType};\n@fragment fn fs() -> @location(0) vec4f {\n  let v = textureSampleBias(t, s, ${coordWGSL}${arrayWGSL}, 0${offsetWGSL});\n  return vec4f(0);\n}\n`;\n    const expectSuccess = isConvertible(coordArgType, coordsRequiredType);\n    t.expectCompileResult(expectSuccess, code);\n  });\n\ng.test('array_index_argument')\n  .specURL('https://gpuweb.github.io/gpuweb/wgsl/#texturesamplebias')\n  .desc(\n    `\nValidates that only incorrect array_index arguments are rejected by ${builtin}\n`\n  )\n  .params(u =>\n    u\n      .combine('textureType', kTextureTypes)\n      // filter out types with no array_index\n      .filter(t => !!kValidTextureSampleBiasParameterTypes[t.textureType].hasArrayIndexArg)\n      .combine('arrayIndexType', keysOf(kValuesTypes))\n      .beginSubcases()\n      .combine('value', [-9, -8, 0, 7, 8])\n      // filter out unsigned types with negative values\n      .filter(t => !isUnsignedType(kValuesTypes[t.arrayIndexType]) || t.value >= 0)\n      .expand('offset', t =>\n        kValidTextureSampleBiasParameterTypes[t.textureType].offsetArgType ? [false, true] : [false]\n      )\n  )\n  .fn(t => {\n    const { textureType, arrayIndexType, value, offset } = t.params;\n    const arrayIndexArgType = kValuesTypes[arrayIndexType];\n    const args = [arrayIndexArgType.create(value)];\n    const { coordsArgType, offsetArgType } = kValidTextureSampleBiasParameterTypes[textureType];\n\n    const coordWGSL = coordsArgType.create(0).wgsl();\n    const arrayWGSL = args.map(arg => arg.wgsl()).join(', ');\n    const offsetWGSL = offset ? `, ${offsetArgType!.create(0).wgsl()}` : '';\n\n    const code = `\n@group(0) @binding(0) var s: sampler;\n@group(0) @binding(1) var t: ${textureType};\n@fragment fn fs() -> @location(0) vec4f {\n  let v = textureSampleBias(t, s, ${coordWGSL}, ${arrayWGSL}, 0${offsetWGSL});\n  return vec4f(0);\n}\n`;\n    const expectSuccess =\n      isConvertible(arrayIndexArgType, Type.i32) || isConvertible(arrayIndexArgType, Type.u32);\n    t.expectCompileResult(expectSuccess, code);\n  });\n\ng.test('bias_argument')\n  .specURL('https://gpuweb.github.io/gpuweb/wgsl/#texturesamplebias')\n  .desc(\n    `\nValidates that only incorrect bias arguments are rejected by ${builtin}\n`\n  )\n  .params(u =>\n    u\n      .combine('textureType', kTextureTypes)\n      // filter out types with no offset\n      .filter(t => !!kValidTextureSampleBiasParameterTypes[t.textureType].offsetArgType)\n      .combine('biasType', keysOf(kValuesTypes))\n      .beginSubcases()\n      // The spec mentions limits of > -16 and < 15.99 so pass some values around there\n      // No error is mentioned for out of range values so make sure no error is generated.\n      .combine('value', [-17, -16, -8, 0, 7, 15.99, 16])\n      // filter out unsigned types with negative values\n      .filter(t => !isUnsignedType(kValuesTypes[t.biasType]) || t.value >= 0)\n      // filter out non-integer values passed to integer types.\n      .filter(t => Number.isInteger(t.value) || isFloatType(scalarTypeOf(kValuesTypes[t.biasType])))\n      .expand('offset', t =>\n        kValidTextureSampleBiasParameterTypes[t.textureType].offsetArgType ? [false, true] : [false]\n      )\n  )\n  .fn(t => {\n    const { textureType, biasType, value, offset } = t.params;\n    const biasArgType = kValuesTypes[biasType];\n    const args = [biasArgType.create(value)];\n    const { coordsArgType, hasArrayIndexArg, offsetArgType } =\n      kValidTextureSampleBiasParameterTypes[textureType];\n\n    const coordWGSL = coordsArgType.create(0).wgsl();\n    const arrayWGSL = hasArrayIndexArg ? ', 0' : '';\n    const biasWGSL = args.map(arg => arg.wgsl()).join(', ');\n    const offsetWGSL = offset ? `, ${offsetArgType!.create(0).wgsl()}` : '';\n\n    const code = `\n@group(0) @binding(0) var s: sampler;\n@group(0) @binding(1) var t: ${textureType};\n@fragment fn fs() -> @location(0) vec4f {\n  let v = textureSampleBias(t, s, ${coordWGSL}${arrayWGSL}, ${biasWGSL}${offsetWGSL});\n  return vec4f(0);\n}\n`;\n    const expectSuccess = isConvertible(biasArgType, Type.f32);\n    t.expectCompileResult(expectSuccess, code);\n  });\n\ng.test('offset_argument')\n  .specURL('https://gpuweb.github.io/gpuweb/wgsl/#texturesamplebias')\n  .desc(\n    `\nValidates that only incorrect offset arguments are rejected by ${builtin}\n`\n  )\n  .params(u =>\n    u\n      .combine('textureType', kTextureTypes)\n      // filter out types with no offset\n      .filter(t => !!kValidTextureSampleBiasParameterTypes[t.textureType].offsetArgType)\n      .combine('offsetType', keysOf(kValuesTypes))\n      .beginSubcases()\n      .combine('value', [-9, -8, 0, 7, 8])\n      // filter out unsigned types with negative values\n      .filter(t => !isUnsignedType(kValuesTypes[t.offsetType]) || t.value >= 0)\n  )\n  .fn(t => {\n    const { textureType, offsetType, value } = t.params;\n    const offsetArgType = kValuesTypes[offsetType];\n    const args = [offsetArgType.create(value)];\n    const {\n      coordsArgType,\n      hasArrayIndexArg,\n      offsetArgType: offsetRequiredType,\n    } = kValidTextureSampleBiasParameterTypes[textureType];\n\n    const coordWGSL = coordsArgType.create(0).wgsl();\n    const arrayWGSL = hasArrayIndexArg ? ', 0' : '';\n    const offsetWGSL = args.map(arg => arg.wgsl()).join(', ');\n\n    const code = `\n@group(0) @binding(0) var s: sampler;\n@group(0) @binding(1) var t: ${textureType};\n@fragment fn fs() -> @location(0) vec4f {\n  let v = textureSampleBias(t, s, ${coordWGSL}${arrayWGSL}, 0, ${offsetWGSL});\n  return vec4f(0);\n}\n`;\n    const expectSuccess =\n      isConvertible(offsetArgType, offsetRequiredType!) && value >= -8 && value <= 7;\n    t.expectCompileResult(expectSuccess, code);\n  });\n\ng.test('offset_argument,non_const')\n  .specURL('https://gpuweb.github.io/gpuweb/wgsl/#texturesamplebias')\n  .desc(\n    `\nValidates that only non-const offset arguments are rejected by ${builtin}\n`\n  )\n  .params(u =>\n    u\n      .combine('textureType', kTextureTypes)\n      .combine('varType', ['c', 'u', 'l'])\n      // filter out types with no offset\n      .filter(t => !!kValidTextureSampleBiasParameterTypes[t.textureType].offsetArgType)\n  )\n  .fn(t => {\n    const { textureType, varType } = t.params;\n    const { coordsArgType, hasArrayIndexArg, offsetArgType } =\n      kValidTextureSampleBiasParameterTypes[textureType];\n\n    const coordWGSL = coordsArgType.create(0).wgsl();\n    const arrayWGSL = hasArrayIndexArg ? ', 0' : '';\n    const offsetWGSL = `${offsetArgType}(${varType})`;\n\n    const code = `\n@group(0) @binding(0) var s: sampler;\n@group(0) @binding(1) var t: ${textureType};\n@group(0) @binding(2) var<uniform> u: ${offsetArgType};\n@fragment fn fs() -> @location(0) vec4f {\n  const c = 1;\n  let l = ${offsetArgType!.create(0).wgsl()};\n  let v = textureSampleBias(t, s, ${coordWGSL}${arrayWGSL}, 0, ${offsetWGSL});\n  return vec4f(0);\n}\n`;\n    const expectSuccess = varType === 'c';\n    t.expectCompileResult(expectSuccess, code);\n  });\n\ng.test('only_in_fragment')\n  .specURL('https://gpuweb.github.io/gpuweb/wgsl/#texturesample')\n  .desc(\n    `\nValidates that ${builtin} must not be used in a compute or vertex shader.\n`\n  )\n  .params(u =>\n    u\n      .combine('textureType', kTextureTypes)\n      .combine('entryPoint', keysOf(kEntryPointsToValidateFragmentOnlyBuiltins))\n      .expand('offset', t =>\n        kValidTextureSampleBiasParameterTypes[t.textureType].offsetArgType ? [false, true] : [false]\n      )\n  )\n  .fn(t => {\n    const { textureType, entryPoint, offset } = t.params;\n    const { coordsArgType, hasArrayIndexArg, offsetArgType } =\n      kValidTextureSampleBiasParameterTypes[textureType];\n\n    const coordWGSL = coordsArgType.create(0).wgsl();\n    const arrayWGSL = hasArrayIndexArg ? ', 0' : '';\n    const offsetWGSL = offset ? `, ${offsetArgType?.create(0).wgsl()}` : '';\n\n    const config = kEntryPointsToValidateFragmentOnlyBuiltins[entryPoint];\n    const code = `\n${config.code}\n@group(0) @binding(0) var s: sampler;\n@group(0) @binding(1) var t: ${textureType};\n\nfn foo() {\n  _ = textureSampleBias(t, s, ${coordWGSL}${arrayWGSL}, 0${offsetWGSL});\n}`;\n    t.expectCompileResult(config.expectSuccess, code);\n  });\n"],"mappings":"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"}