{"version":3,"file":"pack4xI8Clamp.spec.js","names":["description","makeTestGroup","keysOf","ShaderValidationTest","kFeature","kFn","kGoodArgs","kBadArgs","g","test","desc","params","u","combine","fn","t","skipIfLanguageFeatureSupported","preamble","requires","code","expectCompileResult","skipIfLanguageFeatureNotSupported","arg"],"sources":["../../../../../../../src/webgpu/shader/validation/expression/call/builtin/pack4xI8Clamp.spec.ts"],"sourcesContent":["export const description = `Validate pack4xI8Clamp`;\n\nimport { makeTestGroup } from '../../../../../../common/framework/test_group.js';\nimport { keysOf } from '../../../../../../common/util/data_tables.js';\nimport { ShaderValidationTest } from '../../../shader_validation_test.js';\n\nconst kFeature = 'packed_4x8_integer_dot_product';\nconst kFn = 'pack4xI8Clamp';\nconst kGoodArgs = '(vec4i())';\nconst kBadArgs = {\n  '0args': '()',\n  '2args': '(vec4i(),vec4i())',\n  '0i32': '(1i)',\n  '0f32': '(1f)',\n  '0bool': '(false)',\n  '0vec4u': '(vec4u())',\n  '0vec4f': '(vec4f())',\n  '0vec4b': '(vec4<bool>())',\n  '0vec2i': '(vec2i())',\n  '0vec3i': '(vec3i())',\n};\n\nexport const g = makeTestGroup(ShaderValidationTest);\n\ng.test('unsupported')\n  .desc(`Test absence of ${kFn} when ${kFeature} is not supported.`)\n  .params(u => u.combine('requires', [false, true]))\n  .fn(t => {\n    t.skipIfLanguageFeatureSupported(kFeature);\n    const preamble = t.params.requires ? `requires ${kFeature}; ` : '';\n    const code = `${preamble}const c = ${kFn}${kGoodArgs};`;\n    t.expectCompileResult(false, code);\n  });\n\ng.test('supported')\n  .desc(`Test presence of ${kFn} when ${kFeature} is supported.`)\n  .params(u => u.combine('requires', [false, true]))\n  .fn(t => {\n    t.skipIfLanguageFeatureNotSupported(kFeature);\n    const preamble = t.params.requires ? `requires ${kFeature}; ` : '';\n    const code = `${preamble}const c = ${kFn}${kGoodArgs};`;\n    t.expectCompileResult(true, code);\n  });\n\ng.test('bad_args')\n  .desc(`Test compilation failure of ${kFn} with bad arguments`)\n  .params(u => u.combine('arg', keysOf(kBadArgs)))\n  .fn(t => {\n    t.skipIfLanguageFeatureNotSupported(kFeature);\n    t.expectCompileResult(false, `const c = ${kFn}${kBadArgs[t.params.arg]};`);\n  });\n\ng.test('must_use')\n  .desc(`Result of ${kFn} must be used`)\n  .fn(t => {\n    t.skipIfLanguageFeatureNotSupported(kFeature);\n    t.expectCompileResult(false, `fn f() { ${kFn}${kGoodArgs}; }`);\n  });\n"],"mappings":"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"}