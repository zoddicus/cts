{"version":3,"file":"dual_source_blending.spec.js","names":["description","makeTestGroup","ShaderValidationTest","g","test","desc","params","u","combine","beforeAllSubcases","t","requireExtension","selectDeviceOrSkipTestCase","requiredFeatures","fn","enableExtension","expectCompileResult"],"sources":["../../../../../src/webgpu/shader/validation/extension/dual_source_blending.spec.ts"],"sourcesContent":["export const description = `\nValidation tests for the dual_source_blending extension\n`;\n\nimport { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { ShaderValidationTest } from '../shader_validation_test.js';\n\nexport const g = makeTestGroup(ShaderValidationTest);\n\ng.test('use_blend_src_requires_extension_enabled')\n  .desc(\n    `Checks that the blend_src attribute is only allowed with the WGSL extension\n     dual_source_blending enabled in shader and the WebGPU extension dual-source-blending supported\n     on the device.`\n  )\n  .params(u =>\n    u.combine('requireExtension', [true, false]).combine('enableExtension', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    if (t.params.requireExtension) {\n      t.selectDeviceOrSkipTestCase({ requiredFeatures: ['dual-source-blending'] });\n    }\n  })\n  .fn(t => {\n    const { requireExtension, enableExtension } = t.params;\n\n    t.expectCompileResult(\n      requireExtension && enableExtension,\n      `\n        ${enableExtension ? 'enable dual_source_blending;' : ''}\n        struct FragOut {\n          @location(0) @blend_src(0) color : vec4f,\n          @location(0) @blend_src(1) blend : vec4f,\n        }\n        @fragment fn main() -> FragOut {\n          var output : FragOut;\n          output.color = vec4f(1.0, 0.0, 0.0, 1.0);\n          output.blend = vec4f(0.0, 1.0, 0.0, 1.0);\n          return output;\n        }\n    `\n    );\n  });\n"],"mappings":";;GAAA,OAAO,MAAMA,WAAW,GAAI;AAC5B;AACA,CAAC,CAED,SAASC,aAAa,QAAQ,4CAA4C;AAC1E,SAASC,oBAAoB,QAAQ,8BAA8B;;AAEnE,OAAO,MAAMC,CAAC,GAAGF,aAAa,CAACC,oBAAoB,CAAC;;AAEpDC,CAAC,CAACC,IAAI,CAAC,0CAA0C,CAAC;AAC/CC,IAAI;EACF;AACL;AACA;AACE,CAAC;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC,CAACC,OAAO,CAAC,kBAAkB,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAACA,OAAO,CAAC,iBAAiB,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC;AACvF,CAAC;AACAC,iBAAiB,CAAC,CAAAC,CAAC,KAAI;EACtB,IAAIA,CAAC,CAACJ,MAAM,CAACK,gBAAgB,EAAE;IAC7BD,CAAC,CAACE,0BAA0B,CAAC,EAAEC,gBAAgB,EAAE,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC;EAC9E;AACF,CAAC,CAAC;AACDC,EAAE,CAAC,CAAAJ,CAAC,KAAI;EACP,MAAM,EAAEC,gBAAgB,EAAEI,eAAe,CAAC,CAAC,GAAGL,CAAC,CAACJ,MAAM;;EAEtDI,CAAC,CAACM,mBAAmB;IACnBL,gBAAgB,IAAII,eAAe;IAClC;AACP,UAAUA,eAAe,GAAG,8BAA8B,GAAG,EAAG;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,CAAC;AACH,CAAC,CAAC"}