{"version":3,"file":"switch.spec.js","names":["description","makeTestGroup","keysOf","ShaderValidationTest","g","kTests","L_default","wgsl","pass","L_paren_default","L_case_1_2_default","L_case_1_case_2_default","L_case_1_colon_case_2_colon_default_colon","L_case_1_colon_default_colon","L_case_1_colon_default","L_case_1_default_2","L_case_1_default_case_2","L_case_1_default_colon","L_case_1_default","L_case_2_1_default","L_case_2_case_1_default","L_case_2_default_case_1","L_case_builtin_default","L_case_C1_case_C2_default","L_case_C1_default","L_case_default_1","L_case_default_2_1","L_case_default_2_case_1","L_case_default","L_case_expr_default","L_default_break","L_default_case_1_2","L_default_case_1_break","L_default_case_1_case_2","L_default_case_1_colon_break","L_default_case_2_case_1","L_default_colon_break","L_default_colon","L_no_block","L_empty_block","L_no_default","L_default_default","L_default_block_default_block","L_case_1_case_1_default","L_case_C1_case_C1_default","L_case_C2_case_expr_default","L_default_1","L_default_2_case_1","no_cond","no_cond_no_block","lparen_L","L_lparen","lparen_L_lparen","rparen_L_rparen","test","desc","params","u","combine","fn","t","code","expectCompileResult"],"sources":["../../../../../src/webgpu/shader/validation/parse/switch.spec.ts"],"sourcesContent":["export const description = `Validation parser tests for 'switch' statements`;\n\nimport { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { keysOf } from '../../../../common/util/data_tables.js';\nimport { ShaderValidationTest } from '../shader_validation_test.js';\n\nexport const g = makeTestGroup(ShaderValidationTest);\n\nconst kTests = {\n  L_default: { wgsl: `switch L { default {} }`, pass: true },\n  L_paren_default: { wgsl: `switch (L) { default {} }`, pass: true },\n  L_case_1_2_default: { wgsl: `switch L { case 1, 2 {} default {} }`, pass: true },\n  L_case_1_case_2_default: { wgsl: `switch L { case 1 {} case 2 {} default {} }`, pass: true },\n  L_case_1_colon_case_2_colon_default_colon: {\n    wgsl: `switch L { case 1: {} case 2: {} default: {} }`,\n    pass: true,\n  },\n  L_case_1_colon_default_colon: { wgsl: `switch L { case 1: {} default: {} }`, pass: true },\n  L_case_1_colon_default: { wgsl: `switch L { case 1: {} default {} }`, pass: true },\n  L_case_1_default_2: { wgsl: `switch L { case 1, default, 2 {} }`, pass: true },\n  L_case_1_default_case_2: { wgsl: `switch L { case 1 {} default {} case 2 {} }`, pass: true },\n  L_case_1_default_colon: { wgsl: `switch L { case 1 {} default: {} }`, pass: true },\n  L_case_1_default: { wgsl: `switch L { case 1 {} default {} }`, pass: true },\n  L_case_2_1_default: { wgsl: `switch L { case 2, 1 {} default {} }`, pass: true },\n  L_case_2_case_1_default: { wgsl: `switch L { case 2 {} case 1 {} default {} }`, pass: true },\n  L_case_2_default_case_1: { wgsl: `switch L { case 2 {} default {} case 1 {} }`, pass: true },\n  L_case_builtin_default: { wgsl: `switch L { case max(1,2) {} default {} }`, pass: true },\n  L_case_C1_case_C2_default: { wgsl: `switch L { case C1 {} case C2 {} default {} }`, pass: true },\n  L_case_C1_default: { wgsl: `switch L { case C1 {} default {} }`, pass: true },\n  L_case_default_1: { wgsl: `switch L { case default, 1 {} }`, pass: true },\n  L_case_default_2_1: { wgsl: `switch L { case default, 2, 1 {} }`, pass: true },\n  L_case_default_2_case_1: { wgsl: `switch L { case default, 2 {} case 1 {} }`, pass: true },\n  L_case_default: { wgsl: `switch L { case default {} }`, pass: true },\n  L_case_expr_default: { wgsl: `switch L { case 1+1 {} default {} }`, pass: true },\n  L_default_break: { wgsl: `switch L { default { break; } }`, pass: true },\n  L_default_case_1_2: { wgsl: `switch L { default {} case 1, 2 {} }`, pass: true },\n  L_default_case_1_break: { wgsl: `switch L { default {} case 1 { break; } }`, pass: true },\n  L_default_case_1_case_2: { wgsl: `switch L { default {} case 1 {} case 2 {} }`, pass: true },\n  L_default_case_1_colon_break: { wgsl: `switch L { default {} case 1: { break; } }`, pass: true },\n  L_default_case_2_case_1: { wgsl: `switch L { default {} case 2 {} case 1 {} }`, pass: true },\n  L_default_colon_break: { wgsl: `switch L { default: { break; } }`, pass: true },\n  L_default_colon: { wgsl: `switch L { default: {} }`, pass: true },\n\n  L_no_block: { wgsl: `switch L`, pass: false },\n  L_empty_block: { wgsl: `switch L {}`, pass: false },\n  L_no_default: { wgsl: `switch L { case 1 {} }`, pass: false },\n  L_default_default: { wgsl: `switch L { default, default {} }`, pass: false },\n  L_default_block_default_block: { wgsl: `switch L { default {} default {} }`, pass: false },\n  L_case_1_case_1_default: { wgsl: `switch L { case 1 {} case 1 {} default {} }`, pass: false },\n  L_case_C1_case_C1_default: { wgsl: `switch L { case C1 {} case C1 {} default {} }`, pass: false },\n  L_case_C2_case_expr_default: {\n    wgsl: `switch L { case C2 {} case 1+1 {} default {} }`,\n    pass: false,\n  },\n  L_default_1: { wgsl: `switch L { default, 1 {} }`, pass: false },\n  L_default_2_case_1: { wgsl: `switch L { default, 2 {} case 1 {} }`, pass: false },\n\n  no_cond: { wgsl: `switch { default{} }`, pass: false },\n  no_cond_no_block: { wgsl: `switch;`, pass: false },\n  lparen_L: { wgsl: `switch (L { default {}}`, pass: false },\n  L_lparen: { wgsl: `switch L) { default {}}`, pass: false },\n  lparen_L_lparen: { wgsl: `switch )L) { default {}}`, pass: false },\n  rparen_L_rparen: { wgsl: `switch (L( { default {}}`, pass: false },\n};\n\ng.test('parse')\n  .desc(`Test that 'switch' statements are parsed correctly.`)\n  .params(u => u.combine('test', keysOf(kTests)))\n  .fn(t => {\n    const code = `\nfn f() {\n  let L = 1;\n  const C1 = 1;\n  const C2 = 2;\n  ${kTests[t.params.test].wgsl}\n}`;\n    t.expectCompileResult(kTests[t.params.test].pass, code);\n  });\n"],"mappings":"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"}