{"version":3,"file":"phony.spec.js","names":["description","makeTestGroup","keysOf","ShaderValidationTest","g","kTests","literal","wgsl","pass","expr","var","in_for_init","in_for_init_semi","in_for_update","in_for_update_semi","in_block","in_continuing","in_paren","underscore","underscore_semi","underscore_equal","underscore_equal_semi","underscore_equal_underscore_semi","paren_underscore_paren","star_ampersand_undsscore","compound","equality","block","return","test","desc","params","u","combine","fn","t","code","expectCompileResult"],"sources":["../../../../../src/webgpu/shader/validation/parse/phony.spec.ts"],"sourcesContent":["export const description = `Validation parser tests for phony assignment statements`;\n\nimport { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { keysOf } from '../../../../common/util/data_tables.js';\nimport { ShaderValidationTest } from '../shader_validation_test.js';\n\nexport const g = makeTestGroup(ShaderValidationTest);\n\nconst kTests = {\n  literal: { wgsl: `_ = 1;`, pass: true },\n  expr: { wgsl: `_ = (1+v);`, pass: true },\n  var: { wgsl: `_ = v;`, pass: true },\n\n  in_for_init: { wgsl: `for (_ = v;false;) {}`, pass: true },\n  in_for_init_semi: { wgsl: `for (_ = v;;false;) {}`, pass: false },\n  in_for_update: { wgsl: `for (;false; _ = v) {}`, pass: true },\n  in_for_update_semi: { wgsl: `for (;false; _ = v;) {}`, pass: false },\n\n  in_block: { wgsl: `{_ = v;}`, pass: true },\n  in_continuing: { wgsl: `loop { continuing { _ = v; break if true;}}`, pass: true },\n\n  in_paren: { wgsl: `(_ = v;)`, pass: false },\n\n  underscore: { wgsl: `_`, pass: false },\n  underscore_semi: { wgsl: `_;`, pass: false },\n  underscore_equal: { wgsl: `_=`, pass: false },\n  underscore_equal_semi: { wgsl: `_=;`, pass: false },\n  underscore_equal_underscore_semi: { wgsl: `_=_;`, pass: false },\n  paren_underscore_paren: { wgsl: `(_) = 1;`, pass: false },\n  // LHS is not a reference type\n  star_ampersand_undsscore: { wgsl: `*&_ = 1;`, pass: false },\n  compound: { wgsl: `_ += 1;`, pass: false },\n  equality: { wgsl: `_ == 1;`, pass: false },\n  block: { wgsl: `_ = {};`, pass: false },\n  return: { wgsl: `_ = return;`, pass: false },\n};\n\ng.test('parse')\n  .desc(`Test that 'phony assignment' statements are parsed correctly.`)\n  .params(u => u.combine('test', keysOf(kTests)))\n  .fn(t => {\n    const code = `\nfn f() {\n  var v: u32;\n  ${kTests[t.params.test].wgsl}\n}`;\n    t.expectCompileResult(kTests[t.params.test].pass, code);\n  });\n"],"mappings":"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"}