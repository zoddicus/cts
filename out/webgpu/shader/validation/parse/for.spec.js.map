{"version":3,"file":"for.spec.js","names":["description","makeTestGroup","keysOf","ShaderValidationTest","g","kTests","break","wgsl","pass","init_var","init_var_type","init_var_function","init_var_function_type","init_let","init_let_type","init_const","init_const_type","init_call","init_phony","init_increment","init_compound_assign","cond_true","cont_call","cont_phony","cont_increment","cont_compound_assign","init_cond","cond_cont","init_cond_cont","init_shadow","no_semicolon","one_semicolon","no_paren","empty","init_expr","cond_stmt","cont_expr","cont_var","cont_var_type","cont_var_function","cont_var_function_type","cont_let","cont_let_type","test","desc","params","u","combine","fn","t","code","expectCompileResult"],"sources":["../../../../../src/webgpu/shader/validation/parse/for.spec.ts"],"sourcesContent":["export const description = `Validation parser tests for 'for' statements`;\n\nimport { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { keysOf } from '../../../../common/util/data_tables.js';\nimport { ShaderValidationTest } from '../shader_validation_test.js';\n\nexport const g = makeTestGroup(ShaderValidationTest);\n\nconst kTests = {\n  break: { wgsl: `for (;;) { break; }`, pass: true },\n\n  init_var: { wgsl: `for (var i = 1;;) { break; }`, pass: true },\n  init_var_type: { wgsl: `for (var i : i32 = 1;;) { break; }`, pass: true },\n  init_var_function: { wgsl: `for (var<function> i = 1;;) { break; }`, pass: true },\n  init_var_function_type: { wgsl: `for (var<function> i : i32 = 1;;) { break; }`, pass: true },\n  init_let: { wgsl: `for (let i = 1;;) { break; }`, pass: true },\n  init_let_type: { wgsl: `for (let i : u32 = 1;;) { break; }`, pass: true },\n  init_const: { wgsl: `for (const i = 1;;) { break; }`, pass: true },\n  init_const_type: { wgsl: `for (const i : f32 = 1;;) { break; }`, pass: true },\n  init_call: { wgsl: `for (x();;) { break; }`, pass: true },\n  init_phony: { wgsl: `for (_ = v;;) { break; }`, pass: true },\n  init_increment: { wgsl: `for (v++;;) { break; }`, pass: true },\n  init_compound_assign: { wgsl: `for (v += 3;;) { break; }`, pass: true },\n\n  cond_true: { wgsl: `for (;true;) { break; }`, pass: true },\n\n  cont_call: { wgsl: `for (;;x()) { break; }`, pass: true },\n  cont_phony: { wgsl: `for (;;_ = v) { break; }`, pass: true },\n  cont_increment: { wgsl: `for (;;v++) { break; }`, pass: true },\n  cont_compound_assign: { wgsl: `for (;;v += 3) { break; }`, pass: true },\n\n  init_cond: { wgsl: `for (var i = 1; i < 5;) {}`, pass: true },\n  cond_cont: { wgsl: `for (;v < 5; v++) {}`, pass: true },\n  init_cond_cont: { wgsl: `for (var i = 0; i < 5; i++) {}`, pass: true },\n  init_shadow: { wgsl: `for (var f = 0; f < 5; f++) {}`, pass: true },\n\n  no_semicolon: { wgsl: `for () { break; }`, pass: false },\n  one_semicolon: { wgsl: `for (;) { break; }`, pass: false },\n  no_paren: { wgsl: `for ;; { break; }`, pass: false },\n  empty: { wgsl: `for (;;) {}`, pass: false }, // note: fails due to behavior-analysis\n  init_expr: { wgsl: `for (true;;) { break; }`, pass: false },\n  cond_stmt: { wgsl: `for (;var i = 0;) { break; }`, pass: false },\n  cont_expr: { wgsl: `for (;;true) { break; }`, pass: false },\n  cont_var: { wgsl: `for (;;var i = 1) { break; }`, pass: false },\n  cont_var_type: { wgsl: `for (;;var i : i32 = 1) { break; }`, pass: false },\n  cont_var_function: { wgsl: `for (;;var<function> i = 1) { break; }`, pass: false },\n  cont_var_function_type: { wgsl: `for (;;var<function> i : i32 = 1) { break; }`, pass: false },\n  cont_let: { wgsl: `for (;;let i = 1) { break; }`, pass: false },\n  cont_let_type: { wgsl: `for (;;let i : u32 = 1) { break; }`, pass: false },\n};\n\ng.test('parse')\n  .desc(`Test that 'for' statements are parsed correctly.`)\n  .params(u => u.combine('test', keysOf(kTests)))\n  .fn(t => {\n    const code = `\nfn f() {\n  var v = 1;\n  ${kTests[t.params.test].wgsl}\n}\n\nfn x() {}\n`;\n    t.expectCompileResult(kTests[t.params.test].pass, code);\n  });\n"],"mappings":"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"}