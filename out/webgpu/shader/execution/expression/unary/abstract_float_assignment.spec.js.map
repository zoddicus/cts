{"version":3,"file":"abstract_float_assignment.spec.js","names":["description","makeTestGroup","GPUTest","kValue","abstractFloat","TypeAbstractFloat","TypeF16","TypeF32","FP","filteredF64Range","makeCaseCache","allInputSources","run","assignment","g","d","f32","negative","min","positive","max","map","f","input","expected","correctlyRoundedInterval","f16","test","specURL","desc","params","u","combine","fn","t","cases","get","beforeAllSubcases","selectDeviceOrSkipTestCase","requiredFeatures"],"sources":["../../../../../../src/webgpu/shader/execution/expression/unary/abstract_float_assignment.spec.ts"],"sourcesContent":["export const description = `\nExecution Tests for assignment of AbstractFloats to concrete data types\n`;\n\nimport { makeTestGroup } from '../../../../../common/framework/test_group.js';\nimport { GPUTest } from '../../../../gpu_test.js';\nimport { kValue } from '../../../../util/constants.js';\nimport { abstractFloat, TypeAbstractFloat, TypeF16, TypeF32 } from '../../../../util/conversion.js';\nimport { FP } from '../../../../util/floating_point.js';\nimport { filteredF64Range } from '../../../../util/math.js';\nimport { makeCaseCache } from '../case_cache.js';\nimport { allInputSources, run } from '../expression.js';\n\nimport { assignment } from './unary.js';\n\nexport const g = makeTestGroup(GPUTest);\n\nexport const d = makeCaseCache('unary/abstract_float_assignment', {\n  f32: () => {\n    return filteredF64Range(kValue.f32.negative.min, kValue.f32.positive.max).map(f => {\n      return { input: abstractFloat(f), expected: FP.f32.correctlyRoundedInterval(f) };\n    });\n  },\n  f16: () => {\n    return filteredF64Range(kValue.f16.negative.min, kValue.f16.positive.max).map(f => {\n      return { input: abstractFloat(f), expected: FP.f16.correctlyRoundedInterval(f) };\n    });\n  },\n});\n\ng.test('f32')\n  .specURL('https://www.w3.org/TR/WGSL/#floating-point-conversion')\n  .desc(\n    `\nconcretizing to f32\n`\n  )\n  .params(u => u.combine('inputSource', [allInputSources[0]])) // Only defined for const-eval\n  .fn(async t => {\n    const cases = await d.get('f32');\n    await run(t, assignment(), [TypeAbstractFloat], TypeF32, t.params, cases);\n  });\n\ng.test('f16')\n  .specURL('https://www.w3.org/TR/WGSL/#floating-point-conversion')\n  .desc(\n    `\nconcretizing to f16\n`\n  )\n  .beforeAllSubcases(t => {\n    t.selectDeviceOrSkipTestCase({ requiredFeatures: ['shader-f16'] });\n  })\n  .params(u => u.combine('inputSource', [allInputSources[0]])) // Only defined for const-eval\n  .fn(async t => {\n    const cases = await d.get('f16');\n    await run(t, assignment(), [TypeAbstractFloat], TypeF16, t.params, cases);\n  });\n"],"mappings":"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"}