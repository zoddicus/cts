{"version":3,"file":"zero_value.spec.js","names":["description","makeTestGroup","GPUTest","Type","basicExpressionBuilder","run","g","test","specURL","desc","params","u","combine","beforeAllSubcases","t","type","selectDeviceOrSkipTestCase","fn","ops","inputSource","input","expected","create","vec","width","mat","columns","rows","array","length","unimplemented"],"sources":["../../../../../../src/webgpu/shader/execution/expression/constructor/zero_value.spec.ts"],"sourcesContent":["export const description = `\nExecution Tests for zero value constructors\n`;\n\nimport { makeTestGroup } from '../../../../../common/framework/test_group.js';\nimport { GPUTest } from '../../../../gpu_test.js';\nimport { Type } from '../../../../util/conversion.js';\nimport { basicExpressionBuilder, run } from '../expression.js';\n\nexport const g = makeTestGroup(GPUTest);\n\ng.test('scalar')\n  .specURL('https://www.w3.org/TR/WGSL/#zero-value-builtin-function')\n  .desc(`Test that a zero value scalar constructor produces the expected zero value`)\n  .params(u => u.combine('type', ['bool', 'i32', 'u32', 'f32', 'f16'] as const))\n  .beforeAllSubcases(t => {\n    if (t.params.type === 'f16') {\n      t.selectDeviceOrSkipTestCase('shader-f16');\n    }\n  })\n  .fn(async t => {\n    const type = Type[t.params.type];\n    await run(\n      t,\n      basicExpressionBuilder(ops => `${type}()`),\n      [],\n      type,\n      { inputSource: 'const' },\n      [{ input: [], expected: type.create(0) }]\n    );\n  });\n\ng.test('vector')\n  .specURL('https://www.w3.org/TR/WGSL/#zero-value-builtin-function')\n  .desc(`Test that a zero value vector constructor produces the expected zero value`)\n  .params(u =>\n    u\n      .combine('type', ['bool', 'i32', 'u32', 'f32', 'f16'] as const)\n      .combine('width', [2, 3, 4] as const)\n  )\n  .beforeAllSubcases(t => {\n    if (t.params.type === 'f16') {\n      t.selectDeviceOrSkipTestCase('shader-f16');\n    }\n  })\n  .fn(async t => {\n    const type = Type.vec(t.params.width, Type[t.params.type]);\n    await run(\n      t,\n      basicExpressionBuilder(ops => `${type}()`),\n      [],\n      type,\n      { inputSource: 'const' },\n      [{ input: [], expected: type.create(0) }]\n    );\n  });\n\ng.test('matrix')\n  .specURL('https://www.w3.org/TR/WGSL/#zero-value-builtin-function')\n  .desc(`Test that a zero value matrix constructor produces the expected zero value`)\n  .params(u =>\n    u\n      .combine('type', ['f32', 'f16'] as const)\n      .combine('columns', [2, 3, 4] as const)\n      .combine('rows', [2, 3, 4] as const)\n  )\n  .beforeAllSubcases(t => {\n    if (t.params.type === 'f16') {\n      t.selectDeviceOrSkipTestCase('shader-f16');\n    }\n  })\n  .fn(async t => {\n    const type = Type.mat(t.params.columns, t.params.rows, Type[t.params.type]);\n    await run(\n      t,\n      basicExpressionBuilder(ops => `${type}()`),\n      [],\n      type,\n      { inputSource: 'const' },\n      [{ input: [], expected: type.create(0) }]\n    );\n  });\n\ng.test('array')\n  .specURL('https://www.w3.org/TR/WGSL/#zero-value-builtin-function')\n  .desc(`Test that a zero value matrix constructor produces the expected zero value`)\n  .params(u =>\n    u\n      .combine('type', ['bool', 'i32', 'u32', 'f32', 'f16', 'vec3f', 'vec4i'] as const)\n      .combine('length', [1, 5, 10] as const)\n  )\n  .beforeAllSubcases(t => {\n    if (t.params.type === 'f16') {\n      t.selectDeviceOrSkipTestCase('shader-f16');\n    }\n  })\n  .fn(async t => {\n    const type = Type.array(t.params.length, Type[t.params.type]);\n    await run(\n      t,\n      basicExpressionBuilder(ops => `${type}()`),\n      [],\n      type,\n      { inputSource: 'const' },\n      [{ input: [], expected: type.create(0) }]\n    );\n  });\n\ng.test('structure')\n  .specURL('https://www.w3.org/TR/WGSL/#zero-value-builtin-function')\n  .desc(`Test that an structure constructed from element values produces the expected value`)\n  .unimplemented();\n"],"mappings":"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"}