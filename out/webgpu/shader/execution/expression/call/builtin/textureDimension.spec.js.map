{"version":3,"file":"textureDimension.spec.js","names":["description","makeTestGroup","GPUTest","g","test","specURL","desc","params","u","combine","beginSubcases","undefined","unimplemented"],"sources":["../../../../../../../src/webgpu/shader/execution/expression/call/builtin/textureDimension.spec.ts"],"sourcesContent":["export const description = `\nExecution tests for the 'textureDimension' builtin function\n\nThe dimensions of the texture in texels.\nFor textures based on cubes, the results are the dimensions of each face of the cube.\nCube faces are square, so the x and y components of the result are equal.\nIf level is outside the range [0, textureNumLevels(t)) then any valid value for the return type may be returned.\n`;\n\nimport { makeTestGroup } from '../../../../../../common/framework/test_group.js';\nimport { GPUTest } from '../../../../../gpu_test.js';\n\nexport const g = makeTestGroup(GPUTest);\n\ng.test('sampled')\n  .specURL('https://www.w3.org/TR/WGSL/#texturedimensions')\n  .desc(\n    `\nT: f32, i32, u32\n\nfn textureDimensions(t: texture_1d<T>) -> u32\nfn textureDimensions(t: texture_1d<T>, level: u32) -> u32\nfn textureDimensions(t: texture_2d<T>) -> vec2<u32>\nfn textureDimensions(t: texture_2d<T>, level: u32) -> vec2<u32>\nfn textureDimensions(t: texture_2d_array<T>) -> vec2<u32>\nfn textureDimensions(t: texture_2d_array<T>, level: u32) -> vec2<u32>\nfn textureDimensions(t: texture_3d<T>) -> vec3<u32>\nfn textureDimensions(t: texture_3d<T>, level: u32) -> vec3<u32>\nfn textureDimensions(t: texture_cube<T>) -> vec2<u32>\nfn textureDimensions(t: texture_cube<T>, level: u32) -> vec2<u32>\nfn textureDimensions(t: texture_cube_array<T>) -> vec2<u32>\nfn textureDimensions(t: texture_cube_array<T>, level: u32) -> vec2<u32>\nfn textureDimensions(t: texture_multisampled_2d<T>)-> vec2<u32>\n\nParameters:\n * t: the sampled texture\n * level:\n   - The mip level, with level 0 containing a full size version of the texture.\n   - If omitted, the dimensions of level 0 are returned.\n`\n  )\n  .params(u =>\n    u\n      .combine('texture_type', [\n        'texture_1d',\n        'texture_2d',\n        'texture_2d_array',\n        'texture_3d',\n        'texture_cube',\n        'texture_cube_array',\n        'texture_multisampled_2d',\n      ] as const)\n      .beginSubcases()\n      .combine('sampled_type', ['f32-only', 'i32', 'u32'] as const)\n      .combine('level', [undefined, 0, 1, 'textureNumLevels', 'textureNumLevels+1'] as const)\n  )\n  .unimplemented();\n\ng.test('depth')\n  .specURL('https://www.w3.org/TR/WGSL/#texturedimensions')\n  .desc(\n    `\nfn textureDimensions(t: texture_depth_2d) -> vec2<u32>\nfn textureDimensions(t: texture_depth_2d, level: u32) -> vec2<u32>\nfn textureDimensions(t: texture_depth_2d_array) -> vec2<u32>\nfn textureDimensions(t: texture_depth_2d_array, level: u32) -> vec2<u32>\nfn textureDimensions(t: texture_depth_cube) -> vec2<u32>\nfn textureDimensions(t: texture_depth_cube, level: u32) -> vec2<u32>\nfn textureDimensions(t: texture_depth_cube_array) -> vec2<u32>\nfn textureDimensions(t: texture_depth_cube_array, level: u32) -> vec2<u32>\nfn textureDimensions(t: texture_depth_multisampled_2d)-> vec2<u32>\n\nParameters:\n * t: the depth or multisampled texture\n * level:\n   - The mip level, with level 0 containing a full size version of the texture.\n   - If omitted, the dimensions of level 0 are returned.\n`\n  )\n  .params(u =>\n    u\n      .combine('texture_type', [\n        'texture_depth_2d',\n        'texture_depth_2d_array',\n        'texture_depth_cube',\n        'texture_depth_cube_array',\n        'texture_depth_multisampled_2d',\n      ])\n      .beginSubcases()\n      .combine('level', [undefined, 0, 1, 'textureNumLevels', 'textureNumLevels+1'] as const)\n  )\n  .unimplemented();\n\ng.test('storage')\n  .specURL('https://www.w3.org/TR/WGSL/#texturedimensions')\n  .desc(\n    `\nF: rgba8unorm\n   rgba8snorm\n   rgba8uint\n   rgba8sint\n   rgba16uint\n   rgba16sint\n   rgba16float\n   r32uint\n   r32sint\n   r32float\n   rg32uint\n   rg32sint\n   rg32float\n   rgba32uint\n   rgba32sint\n   rgba32float\nA: read, write, read_write\n\nfn textureDimensions(t: texture_storage_1d<F,A>) -> u32\nfn textureDimensions(t: texture_storage_2d<F,A>) -> vec2<u32>\nfn textureDimensions(t: texture_storage_2d_array<F,A>) -> vec2<u32>\nfn textureDimensions(t: texture_storage_3d<F,A>) -> vec3<u32>\n\nParameters:\n * t: the storage texture\n`\n  )\n  .params(u =>\n    u\n      .combine('texel_format', [\n        'rgba8unorm',\n        'rgba8snorm',\n        'rgba8uint',\n        'rgba8sint',\n        'rgba16uint',\n        'rgba16sint',\n        'rgba16float',\n        'r32uint',\n        'r32sint',\n        'r32float',\n        'rg32uint',\n        'rg32sint',\n        'rg32float',\n        'rgba32uint',\n        'rgba32sint',\n        'rgba32float',\n      ] as const)\n      .beginSubcases()\n      .combine('access_mode', ['read', 'write', 'read_write'] as const)\n  )\n  .unimplemented();\n\ng.test('external')\n  .specURL('https://www.w3.org/TR/WGSL/#texturedimensions')\n  .desc(\n    `\nfn textureDimensions(t: texture_external) -> vec2<u32>\n\nParameters:\n * t: the external texture\n`\n  )\n  .unimplemented();\n"],"mappings":";AAAA;AAAA,GAAA,OAAO,MAAMA,WAAW,GAAI;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,SAASC,aAAa,QAAQ,kDAAkD;AAChF,SAASC,OAAO,QAAQ,4BAA4B;;AAEpD,OAAO,MAAMC,CAAC,GAAGF,aAAa,CAACC,OAAO,CAAC;;AAEvCC,CAAC,CAACC,IAAI,CAAC,SAAS,CAAC;AACdC,OAAO,CAAC,+CAA+C,CAAC;AACxDC,IAAI;AACF;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CACE;;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC;AACEC,OAAO,CAAC,cAAc,EAAE;AACvB,YAAY;AACZ,YAAY;AACZ,kBAAkB;AAClB,YAAY;AACZ,cAAc;AACd,oBAAoB;AACpB,yBAAyB,CAC1B,CAAU;;AACVC,aAAa,EAAE;AACfD,OAAO,CAAC,cAAc,EAAE,CAAC,UAAU,EAAE,KAAK,EAAE,KAAK,CAAC,CAAU;AAC5DA,OAAO,CAAC,OAAO,EAAE,CAACE,SAAS,EAAE,CAAC,EAAE,CAAC,EAAE,kBAAkB,EAAE,oBAAoB,CAAC,CAAU,CAC1F;;AACAC,aAAa,EAAE;;AAElBT,CAAC,CAACC,IAAI,CAAC,OAAO,CAAC;AACZC,OAAO,CAAC,+CAA+C,CAAC;AACxDC,IAAI;AACF;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CACE;;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC;AACEC,OAAO,CAAC,cAAc,EAAE;AACvB,kBAAkB;AAClB,wBAAwB;AACxB,oBAAoB;AACpB,0BAA0B;AAC1B,+BAA+B,CAChC,CAAC;;AACDC,aAAa,EAAE;AACfD,OAAO,CAAC,OAAO,EAAE,CAACE,SAAS,EAAE,CAAC,EAAE,CAAC,EAAE,kBAAkB,EAAE,oBAAoB,CAAC,CAAU,CAC1F;;AACAC,aAAa,EAAE;;AAElBT,CAAC,CAACC,IAAI,CAAC,SAAS,CAAC;AACdC,OAAO,CAAC,+CAA+C,CAAC;AACxDC,IAAI;AACF;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CACE;;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC;AACEC,OAAO,CAAC,cAAc,EAAE;AACvB,YAAY;AACZ,YAAY;AACZ,WAAW;AACX,WAAW;AACX,YAAY;AACZ,YAAY;AACZ,aAAa;AACb,SAAS;AACT,SAAS;AACT,UAAU;AACV,UAAU;AACV,UAAU;AACV,WAAW;AACX,YAAY;AACZ,YAAY;AACZ,aAAa,CACd,CAAU;;AACVC,aAAa,EAAE;AACfD,OAAO,CAAC,aAAa,EAAE,CAAC,MAAM,EAAE,OAAO,EAAE,YAAY,CAAC,CAAU,CACpE;;AACAG,aAAa,EAAE;;AAElBT,CAAC,CAACC,IAAI,CAAC,UAAU,CAAC;AACfC,OAAO,CAAC,+CAA+C,CAAC;AACxDC,IAAI;AACF;AACL;AACA;AACA;AACA;AACA,CAAC,CACE;;AACAM,aAAa,EAAE"}