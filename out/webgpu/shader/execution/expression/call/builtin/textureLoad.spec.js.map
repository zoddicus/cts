{"version":3,"file":"textureLoad.spec.js","names":["description","makeTestGroup","unreachable","iterRange","canUseAsRenderTarget","isCompressedFloatTextureFormat","isDepthTextureFormat","isEncodableTextureFormat","isMultisampledTextureFormat","isStencilTextureFormat","kCompressedTextureFormats","kDepthStencilFormats","kEncodableTextureFormats","kTextureFormatInfo","textureDimensionAndFormatCompatible","GPUTest","kFloat32Format","kFloat16Format","numberToFloatBits","pack4x8unorm","pack4x8snorm","maxMipLevelCount","virtualMipSize","TexelFormats","checkCallResults","chooseTextureSize","createTextureWithRandomDataAndGetTexels","doTextureCalls","appendComponentTypeForFormatToTextureType","kSamplePointMethods","generateTextureBuiltinInputs1D","generateTextureBuiltinInputs2D","generateTextureBuiltinInputs3D","generateCoordBoundaries","kTestableColorFormats","normalizedCoordToTexelLoadTestCoord","descriptor","mipLevel","coordType","v","size","dimension","map","i","t","Math","abs","round","g","test","specURL","desc","params","u","combine","filter","format","blockHeight","beginSubcases","beforeAllSubcases","skipIfTextureFormatNotSupported","selectDeviceForTextureFormatOrSkipTestCase","fn","C","L","samplePoints","width","minSize","minBlocks","usage","GPUTextureUsage","COPY_DST","TEXTURE_BINDING","texels","texture","calls","method","num","mipLevelCount","type","hashInputs","coords","builtin","levelType","textureType","viewDescriptor","sampler","undefined","results","res","expectOK","RENDER_ATTACHMENT","viewDimension","texture_type","skipIfTextureLoadNotSupportedForTextureType","S","sampleCount","sampleIndex","sampleIndexType","paramsSubcasesOnly","unimplemented","combineWithParams","A","arrayIndex","depthOrArrayLayers","arrayIndexType","shaderValues","r","b","a","_shaderType","skipIf","hasLanguageFeature","selectDeviceOrSkipTestCase","skipIfTextureFormatNotUsableAsStorageTexture","values","useType","assignValue","wgsl","length","bytesPerRow","bytesPerTexel","textureSize","height","createTextureTracked","STORAGE_BINDING","outputBuffer","makeBufferWithContents","Uint32Array","x","GPUBufferUsage","COPY_SRC","STORAGE","trackForCleanup","transformed","flatMap","texelBuffer","pipeline","device","createComputePipeline","layout","compute","module","createShaderModule","code","entryPoint","bg","createBindGroup","getBindGroupLayout","entries","binding","resource","createView","buffer","encoder","createCommandEncoder","copyBufferToTexture","offset","rowsPerImage","pass","beginComputePass","setPipeline","setBindGroup","dispatchWorkgroups","end","queue","submit","finish","expected","expectGPUBufferValuesEqual"],"sources":["../../../../../../../src/webgpu/shader/execution/expression/call/builtin/textureLoad.spec.ts"],"sourcesContent":["export const description = `\nExecution tests for the 'textureLoad' builtin function\n\nReads a single texel from a texture without sampling or filtering.\n\nReturns the unfiltered texel data.\n\nAn out of bounds access occurs if:\n * any element of coords is outside the range [0, textureDimensions(t, level)) for the corresponding element, or\n * array_index is outside the range [0, textureNumLayers(t)), or\n * level is outside the range [0, textureNumLevels(t))\n\nIf an out of bounds access occurs, the built-in function returns one of:\n * The data for some texel within bounds of the texture\n * A vector (0,0,0,0) or (0,0,0,1) of the appropriate type for non-depth textures\n * 0.0 for depth textures\n\nTODO: Test textureLoad with depth textures as texture_2d, etc...\nTODO: Test textureLoad with multisampled stencil8 format\nTODO: Test un-encodable formats.\nTODO: Test stencil8 format.\n`;\n\nimport { makeTestGroup } from '../../../../../../common/framework/test_group.js';\nimport { unreachable, iterRange } from '../../../../../../common/util/util.js';\nimport {\n  canUseAsRenderTarget,\n  isCompressedFloatTextureFormat,\n  isDepthTextureFormat,\n  isEncodableTextureFormat,\n  isMultisampledTextureFormat,\n  isStencilTextureFormat,\n  kCompressedTextureFormats,\n  kDepthStencilFormats,\n  kEncodableTextureFormats,\n  kTextureFormatInfo,\n  textureDimensionAndFormatCompatible,\n} from '../../../../../format_info.js';\nimport { GPUTest } from '../../../../../gpu_test.js';\nimport {\n  kFloat32Format,\n  kFloat16Format,\n  numberToFloatBits,\n  pack4x8unorm,\n  pack4x8snorm,\n} from '../../../../../util/conversion.js';\nimport { maxMipLevelCount, virtualMipSize } from '../../../../../util/texture/base.js';\nimport { TexelFormats } from '../../../../types.js';\n\nimport {\n  TextureCall,\n  checkCallResults,\n  chooseTextureSize,\n  createTextureWithRandomDataAndGetTexels,\n  doTextureCalls,\n  appendComponentTypeForFormatToTextureType,\n  vec1,\n  vec2,\n  vec3,\n  kSamplePointMethods,\n  generateTextureBuiltinInputs1D,\n  generateTextureBuiltinInputs2D,\n  generateTextureBuiltinInputs3D,\n  Dimensionality,\n} from './texture_utils.js';\nimport { generateCoordBoundaries } from './utils.js';\n\nconst kTestableColorFormats = [...kEncodableTextureFormats, ...kCompressedTextureFormats] as const;\n\nexport function normalizedCoordToTexelLoadTestCoord<T extends Dimensionality>(\n  descriptor: GPUTextureDescriptor,\n  mipLevel: number,\n  coordType: 'i32' | 'u32',\n  v: T\n): T {\n  const size = virtualMipSize(descriptor.dimension ?? '2d', descriptor.size, mipLevel);\n  return v.map((v, i) => {\n    const t = v * size[i];\n    return coordType === 'u32' ? Math.abs(Math.round(t)) : Math.round(t);\n  }) as T;\n}\n\nexport const g = makeTestGroup(GPUTest);\n\ng.test('sampled_1d')\n  .specURL('https://www.w3.org/TR/WGSL/#textureload')\n  .desc(\n    `\nC is i32 or u32\n\nfn textureLoad(t: texture_1d<T>, coords: C, level: C) -> vec4<T>\n\nParameters:\n * t: The sampled texture to read from\n * coords: The 0-based texel coordinate\n * level: The mip level, with level 0 containing a full size version of the texture\n`\n  )\n  .params(u =>\n    u\n      .combine('format', kTestableColorFormats)\n      .filter(t => textureDimensionAndFormatCompatible('1d', t.format))\n      // 1d textures can't have a height !== 1\n      .filter(t => kTextureFormatInfo[t.format].blockHeight === 1)\n      .beginSubcases()\n      .combine('samplePoints', kSamplePointMethods)\n      .combine('C', ['i32', 'u32'] as const)\n      .combine('L', ['i32', 'u32'] as const)\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    t.skipIfTextureFormatNotSupported(format);\n    t.selectDeviceForTextureFormatOrSkipTestCase(t.params.format);\n  })\n  .fn(async t => {\n    const { format, C, L, samplePoints } = t.params;\n\n    // We want at least 4 blocks or something wide enough for 3 mip levels.\n    const [width] = chooseTextureSize({ minSize: 8, minBlocks: 4, format });\n    const size = [width, 1];\n\n    const descriptor: GPUTextureDescriptor = {\n      format,\n      dimension: '1d',\n      size,\n      usage: GPUTextureUsage.COPY_DST | GPUTextureUsage.TEXTURE_BINDING,\n    };\n    const { texels, texture } = await createTextureWithRandomDataAndGetTexels(t, descriptor);\n\n    const calls: TextureCall<vec1>[] = generateTextureBuiltinInputs1D(50, {\n      method: samplePoints,\n      descriptor,\n      mipLevel: { num: texture.mipLevelCount, type: L },\n      hashInputs: [format, samplePoints, C, L],\n    }).map(({ coords, mipLevel }, i) => {\n      return {\n        builtin: 'textureLoad',\n        coordType: C === 'i32' ? 'i' : 'u',\n        levelType: L === 'i32' ? 'i' : 'u',\n        mipLevel,\n        coords: normalizedCoordToTexelLoadTestCoord(descriptor, mipLevel, C, coords),\n      };\n    });\n\n    const textureType = appendComponentTypeForFormatToTextureType('texture_1d', texture.format);\n    const viewDescriptor = {};\n    const sampler = undefined;\n    const results = await doTextureCalls(t, texture, viewDescriptor, textureType, sampler, calls);\n    const res = await checkCallResults(\n      t,\n      { texels, descriptor, viewDescriptor },\n      textureType,\n      sampler,\n      calls,\n      results\n    );\n    t.expectOK(res);\n  });\n\ng.test('sampled_2d')\n  .specURL('https://www.w3.org/TR/WGSL/#textureload')\n  .desc(\n    `\nC is i32 or u32\nL is i32 or u32\n\nfn textureLoad(t: texture_2d<T>, coords: vec2<C>, level: L) -> vec4<T>\n\nParameters:\n * t: The sampled texture to read from\n * coords: The 0-based texel coordinate\n * level: The mip level, with level 0 containing a full size version of the texture\n`\n  )\n  .params(u =>\n    u\n      .combine('format', kTestableColorFormats)\n      // MAINTENANCE_TODO: Update createTextureFromTexelViews to support stencil8 and remove this filter.\n      .filter(t => t.format !== 'stencil8' && !isCompressedFloatTextureFormat(t.format))\n      .beginSubcases()\n      .combine('samplePoints', kSamplePointMethods)\n      .combine('C', ['i32', 'u32'] as const)\n      .combine('L', ['i32', 'u32'] as const)\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    t.skipIfTextureFormatNotSupported(format);\n    t.selectDeviceForTextureFormatOrSkipTestCase(t.params.format);\n  })\n  .fn(async t => {\n    const { format, samplePoints, C, L } = t.params;\n\n    // We want at least 4 blocks or something wide enough for 3 mip levels.\n    const size = chooseTextureSize({ minSize: 8, minBlocks: 4, format });\n\n    const descriptor: GPUTextureDescriptor = {\n      format,\n      size,\n      usage:\n        GPUTextureUsage.COPY_DST |\n        GPUTextureUsage.TEXTURE_BINDING |\n        (canUseAsRenderTarget(format) ? GPUTextureUsage.RENDER_ATTACHMENT : 0),\n      mipLevelCount: maxMipLevelCount({ size }),\n    };\n    const { texels, texture } = await createTextureWithRandomDataAndGetTexels(t, descriptor);\n\n    const calls: TextureCall<vec2>[] = generateTextureBuiltinInputs2D(50, {\n      method: samplePoints,\n      descriptor,\n      hashInputs: [format, samplePoints, C, L],\n    }).map(({ coords, mipLevel }) => {\n      return {\n        builtin: 'textureLoad',\n        coordType: C === 'i32' ? 'i' : 'u',\n        levelType: L === 'i32' ? 'i' : 'u',\n        mipLevel,\n        coords: normalizedCoordToTexelLoadTestCoord(descriptor, mipLevel, C, coords),\n      };\n    });\n\n    const textureType = appendComponentTypeForFormatToTextureType('texture_2d', texture.format);\n    const viewDescriptor = {};\n    const sampler = undefined;\n    const results = await doTextureCalls(t, texture, viewDescriptor, textureType, sampler, calls);\n    const res = await checkCallResults(\n      t,\n      { texels, descriptor, viewDescriptor },\n      textureType,\n      sampler,\n      calls,\n      results\n    );\n    t.expectOK(res);\n  });\n\ng.test('sampled_3d')\n  .specURL('https://www.w3.org/TR/WGSL/#textureload')\n  .desc(\n    `\nC is i32 or u32\n\nfn textureLoad(t: texture_3d<T>, coords: vec3<C>, level: C) -> vec4<T>\n\nParameters:\n * t: The sampled texture to read from\n * coords: The 0-based texel coordinate\n * level: The mip level, with level 0 containing a full size version of the texture\n`\n  )\n  .params(u =>\n    u\n      .combine('format', kTestableColorFormats)\n      .filter(t => textureDimensionAndFormatCompatible('3d', t.format))\n      .beginSubcases()\n      .combine('samplePoints', kSamplePointMethods)\n      .combine('C', ['i32', 'u32'] as const)\n      .combine('L', ['i32', 'u32'] as const)\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    t.skipIfTextureFormatNotSupported(format);\n    t.selectDeviceForTextureFormatOrSkipTestCase(t.params.format);\n  })\n  .fn(async t => {\n    const { format, samplePoints, C, L } = t.params;\n\n    // We want at least 4 blocks or something wide enough for 3 mip levels.\n    const size = chooseTextureSize({ minSize: 8, minBlocks: 4, format, viewDimension: '3d' });\n\n    const descriptor: GPUTextureDescriptor = {\n      format,\n      dimension: '3d',\n      size,\n      usage: GPUTextureUsage.COPY_DST | GPUTextureUsage.TEXTURE_BINDING,\n      mipLevelCount: maxMipLevelCount({ size }),\n    };\n    const { texels, texture } = await createTextureWithRandomDataAndGetTexels(t, descriptor);\n\n    const calls: TextureCall<vec3>[] = generateTextureBuiltinInputs3D(50, {\n      method: samplePoints,\n      descriptor,\n      mipLevel: { num: texture.mipLevelCount, type: L },\n      hashInputs: [format, samplePoints, C, L],\n    }).map(({ coords, mipLevel }) => {\n      return {\n        builtin: 'textureLoad',\n        coordType: C === 'i32' ? 'i' : 'u',\n        levelType: L === 'i32' ? 'i' : 'u',\n        mipLevel,\n        coords: normalizedCoordToTexelLoadTestCoord(descriptor, mipLevel, C, coords),\n      };\n    });\n\n    const textureType = appendComponentTypeForFormatToTextureType('texture_3d', texture.format);\n    const viewDescriptor = {};\n    const sampler = undefined;\n    const results = await doTextureCalls(t, texture, viewDescriptor, textureType, sampler, calls);\n    const res = await checkCallResults(\n      t,\n      { texels, descriptor, viewDescriptor },\n      textureType,\n      sampler,\n      calls,\n      results\n    );\n    t.expectOK(res);\n  });\n\ng.test('multisampled')\n  .specURL('https://www.w3.org/TR/WGSL/#textureload')\n  .desc(\n    `\nC is i32 or u32\nS is i32 or u32\n\nfn textureLoad(t: texture_multisampled_2d<T>, coords: vec2<C>, sample_index: S)-> vec4<T>\nfn textureLoad(t: texture_depth_multisampled_2d, coords: vec2<C>, sample_index: S)-> f32\n\nParameters:\n * t: The sampled texture to read from\n * coords: The 0-based texel coordinate\n * sample_index: The 0-based sample index of the multisampled texture\n`\n  )\n  .params(u =>\n    u\n      .combine('texture_type', [\n        'texture_multisampled_2d',\n        'texture_depth_multisampled_2d',\n      ] as const)\n      .combine('format', kTestableColorFormats)\n      .filter(t => isMultisampledTextureFormat(t.format))\n      .filter(t => !isStencilTextureFormat(t.format))\n      // Filter out texture_depth_multisampled_2d with non-depth formats\n      .filter(\n        t =>\n          !(t.texture_type === 'texture_depth_multisampled_2d' && !isDepthTextureFormat(t.format))\n      )\n      .beginSubcases()\n      .combine('samplePoints', kSamplePointMethods)\n      .combine('C', ['i32', 'u32'] as const)\n      .combine('S', ['i32', 'u32'] as const)\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    t.skipIfTextureFormatNotSupported(format);\n    t.skipIfTextureLoadNotSupportedForTextureType(t.params.texture_type);\n    t.selectDeviceForTextureFormatOrSkipTestCase(t.params.format);\n  })\n  .fn(async t => {\n    const { texture_type, format, samplePoints, C, S } = t.params;\n\n    const sampleCount = 4;\n    const descriptor: GPUTextureDescriptor = {\n      format,\n      size: [8, 8],\n      usage:\n        GPUTextureUsage.COPY_DST |\n        GPUTextureUsage.TEXTURE_BINDING |\n        GPUTextureUsage.RENDER_ATTACHMENT,\n      sampleCount,\n    };\n    const { texels, texture } = await createTextureWithRandomDataAndGetTexels(t, descriptor);\n\n    const calls: TextureCall<vec2>[] = generateTextureBuiltinInputs2D(50, {\n      method: samplePoints,\n      descriptor,\n      sampleIndex: { num: texture.sampleCount, type: S },\n      hashInputs: [format, samplePoints, C, S],\n    }).map(({ coords, sampleIndex }) => {\n      return {\n        builtin: 'textureLoad',\n        coordType: C === 'i32' ? 'i' : 'u',\n        sampleIndexType: S === 'i32' ? 'i' : 'u',\n        sampleIndex,\n        coords: normalizedCoordToTexelLoadTestCoord(descriptor, 0, C, coords),\n      };\n    });\n\n    const textureType = appendComponentTypeForFormatToTextureType(texture_type, texture.format);\n    const viewDescriptor = {};\n    const sampler = undefined;\n    const results = await doTextureCalls(t, texture, viewDescriptor, textureType, sampler, calls);\n    const res = await checkCallResults(\n      t,\n      { texels, descriptor, viewDescriptor },\n      textureType,\n      sampler,\n      calls,\n      results\n    );\n    t.expectOK(res);\n  });\n\ng.test('depth')\n  .specURL('https://www.w3.org/TR/WGSL/#textureload')\n  .desc(\n    `\nC is i32 or u32\n\nfn textureLoad(t: texture_depth_2d, coords: vec2<C>, level: L) -> f32\n\nParameters:\n * t: The sampled texture to read from\n * coords: The 0-based texel coordinate\n * level: The mip level, with level 0 containing a full size version of the texture\n`\n  )\n  .params(u =>\n    u\n      .combine('format', kDepthStencilFormats)\n      // filter out stencil only formats\n      .filter(t => isDepthTextureFormat(t.format))\n      // MAINTENANCE_TODO: Remove when support for depth24plus, depth24plus-stencil8, and depth32float-stencil8 is added.\n      .filter(t => isEncodableTextureFormat(t.format))\n      .beginSubcases()\n      .combine('samplePoints', kSamplePointMethods)\n      .combine('C', ['i32', 'u32'] as const)\n      .combine('L', ['i32', 'u32'] as const)\n  )\n  .beforeAllSubcases(t => {\n    t.skipIfTextureLoadNotSupportedForTextureType('texture_depth_2d');\n  })\n  .fn(async t => {\n    const { format, samplePoints, C, L } = t.params;\n\n    // We want at least 4 blocks or something wide enough for 3 mip levels.\n    const size = chooseTextureSize({ minSize: 8, minBlocks: 4, format });\n\n    const descriptor: GPUTextureDescriptor = {\n      format,\n      size,\n      usage:\n        GPUTextureUsage.COPY_DST |\n        GPUTextureUsage.TEXTURE_BINDING |\n        GPUTextureUsage.RENDER_ATTACHMENT,\n      mipLevelCount: maxMipLevelCount({ size }),\n    };\n    const { texels, texture } = await createTextureWithRandomDataAndGetTexels(t, descriptor);\n\n    const calls: TextureCall<vec2>[] = generateTextureBuiltinInputs2D(50, {\n      method: samplePoints,\n      descriptor,\n      mipLevel: { num: texture.mipLevelCount, type: L },\n      hashInputs: [format, samplePoints, C, L],\n    }).map(({ coords, mipLevel }) => {\n      return {\n        builtin: 'textureLoad',\n        coordType: C === 'i32' ? 'i' : 'u',\n        levelType: L === 'i32' ? 'i' : 'u',\n        mipLevel,\n        coords: normalizedCoordToTexelLoadTestCoord(descriptor, mipLevel, C, coords),\n      };\n    });\n    const textureType = 'texture_depth_2d';\n    const viewDescriptor = {};\n    const sampler = undefined;\n    const results = await doTextureCalls(t, texture, viewDescriptor, textureType, sampler, calls);\n    const res = await checkCallResults(\n      t,\n      { texels, descriptor, viewDescriptor },\n      textureType,\n      sampler,\n      calls,\n      results\n    );\n    t.expectOK(res);\n  });\n\ng.test('external')\n  .specURL('https://www.w3.org/TR/WGSL/#textureload')\n  .desc(\n    `\nC is i32 or u32\n\nfn textureLoad(t: texture_external, coords: vec2<C>) -> vec4<f32>\n\nParameters:\n * t: The sampled texture to read from\n * coords: The 0-based texel coordinate\n`\n  )\n  .paramsSubcasesOnly(u =>\n    u.combine('C', ['i32', 'u32'] as const).combine('coords', generateCoordBoundaries(2))\n  )\n  .unimplemented();\n\ng.test('arrayed')\n  .specURL('https://www.w3.org/TR/WGSL/#textureload')\n  .desc(\n    `\nC is i32 or u32\n\nfn textureLoad(t: texture_2d_array<T>, coords: vec2<C>, array_index: A, level: L) -> vec4<T>\nfn textureLoad(t: texture_depth_2d_array, coords: vec2<C>, array_index: A, level: L) -> f32\n\nParameters:\n * t: The sampled texture to read from\n * coords: The 0-based texel coordinate\n * array_index: The 0-based texture array index\n * level: The mip level, with level 0 containing a full size version of the texture\n`\n  )\n  .params(u =>\n    u\n      .combine('format', kTestableColorFormats)\n      // MAINTENANCE_TODO: Update createTextureFromTexelViews to support stencil8 and remove this filter.\n      .filter(t => t.format !== 'stencil8' && !isCompressedFloatTextureFormat(t.format))\n      .combine('texture_type', ['texture_2d_array', 'texture_depth_2d_array'] as const)\n      .filter(\n        t => !(t.texture_type === 'texture_depth_2d_array' && !isDepthTextureFormat(t.format))\n      )\n      .beginSubcases()\n      .combine('samplePoints', kSamplePointMethods)\n      .combineWithParams([\n        { C: 'i32', A: 'u32', L: 'u32' },\n        { C: 'u32', A: 'u32', L: 'u32' },\n        { C: 'u32', A: 'i32', L: 'u32' },\n        { C: 'u32', A: 'u32', L: 'i32' },\n      ] as const)\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    t.skipIfTextureFormatNotSupported(format);\n    t.skipIfTextureLoadNotSupportedForTextureType(t.params.texture_type);\n    t.selectDeviceForTextureFormatOrSkipTestCase(t.params.format);\n  })\n  .fn(async t => {\n    const { texture_type, format, samplePoints, C, A, L } = t.params;\n\n    // We want at least 4 blocks or something wide enough for 3 mip levels.\n    const size = chooseTextureSize({ minSize: 8, minBlocks: 4, format, viewDimension: '3d' });\n\n    const descriptor: GPUTextureDescriptor = {\n      format,\n      size,\n      usage:\n        GPUTextureUsage.COPY_DST |\n        GPUTextureUsage.TEXTURE_BINDING |\n        (canUseAsRenderTarget(format) ? GPUTextureUsage.RENDER_ATTACHMENT : 0),\n      mipLevelCount: maxMipLevelCount({ size }),\n    };\n    const { texels, texture } = await createTextureWithRandomDataAndGetTexels(t, descriptor);\n\n    const calls: TextureCall<vec2>[] = generateTextureBuiltinInputs2D(50, {\n      method: samplePoints,\n      descriptor,\n      mipLevel: { num: texture.mipLevelCount, type: L },\n      arrayIndex: { num: texture.depthOrArrayLayers, type: A },\n      hashInputs: [format, samplePoints, C, L, A],\n    }).map(({ coords, mipLevel, arrayIndex }) => {\n      return {\n        builtin: 'textureLoad',\n        coordType: C === 'i32' ? 'i' : 'u',\n        levelType: L === 'i32' ? 'i' : 'u',\n        arrayIndexType: A === 'i32' ? 'i' : 'u',\n        arrayIndex,\n        mipLevel,\n        coords: normalizedCoordToTexelLoadTestCoord(descriptor, mipLevel, C, coords),\n      };\n    });\n    const textureType = appendComponentTypeForFormatToTextureType(texture_type, texture.format);\n    const viewDescriptor = {};\n    const sampler = undefined;\n    const results = await doTextureCalls(t, texture, viewDescriptor, textureType, sampler, calls);\n    const res = await checkCallResults(\n      t,\n      { texels, descriptor, viewDescriptor },\n      textureType,\n      sampler,\n      calls,\n      results\n    );\n    t.expectOK(res);\n  });\n\n// Returns texel values to use as inputs for textureLoad.\n// Values are kept simple to avoid rounding issues.\nfunction shaderValues(format: string, type: string) {\n  switch (type) {\n    case 'f32': {\n      switch (format) {\n        case 'rbga8snorm':\n          // prettier-ignore\n          return [\n            { r:  0.0, g:  0.0, b:  0.0, a:  0.0, },\n            { r:  0.2, g:  0.4, b:  0.6, a:  0.8, },\n            { r: -0.2, g: -0.4, b: -0.6, a: -0.8, },\n            { r:  0.2, g: -0.4, b:  0.6, a: -0.8, },\n            { r: -0.2, g:  0.4, b: -0.6, a:  0.8, },\n            { r:  0.2, g:  0.2, b:  0.2, a:  0.2, },\n            { r: -0.2, g: -0.2, b: -0.2, a: -0.2, },\n            { r:  0.4, g:  0.4, b:  0.4, a:  0.4, },\n            { r: -0.4, g: -0.4, b: -0.4, a: -0.4, },\n            { r:  0.6, g:  0.6, b:  0.6, a:  0.6, },\n            { r: -0.6, g: -0.6, b: -0.6, a: -0.6, },\n            { r:  0.8, g:  0.8, b:  0.8, a:  0.8, },\n            { r: -0.8, g: -0.8, b: -0.8, a: -0.8, },\n          ];\n        case 'rgba8unorm':\n        case 'bgra8unorm':\n          // prettier-ignore\n          return [\n            { r: 0.0, g: 0.0, b: 0.0, a: 0.0, },\n            { r: 0.2, g: 0.4, b: 0.6, a: 0.8, },\n            { r: 0.9, g: 0.4, b: 0.6, a: 0.8, },\n            { r: 0.2, g: 0.9, b: 0.6, a: 0.8, },\n            { r: 0.2, g: 0.4, b: 0.9, a: 0.8, },\n            { r: 0.2, g: 0.4, b: 0.6, a: 0.9, },\n            { r: 0.2, g: 0.2, b: 0.2, a: 0.2, },\n            { r: 0.4, g: 0.4, b: 0.4, a: 0.4, },\n            { r: 0.6, g: 0.6, b: 0.6, a: 0.6, },\n            { r: 0.8, g: 0.8, b: 0.8, a: 0.8, },\n          ];\n        default:\n          // Stick within 16-bit ranges.\n          // prettier-ignore\n          return [\n            { r:  100, g:  128, b:  100, a:  128, },\n            { r:   64, g:   32, b:   32, a:   64, },\n            { r:    8, g:    0, b:    8, a:    0, },\n            { r:    0, g:    0, b:    0, a:    0, },\n            { r: -100, g:  128, b:  100, a:  128, },\n            { r:  -64, g:   32, b:   32, a:   64, },\n            { r:   -8, g:    0, b:    8, a:    0, },\n            { r:  100, g: -128, b:  100, a:  128, },\n            { r:   64, g:  -32, b:   32, a:   64, },\n            { r:    8, g:    0, b:    8, a:    0, },\n            { r:  100, g:  128, b: -100, a:  128, },\n            { r:   64, g:   32, b:  -32, a:   64, },\n            { r:    8, g:    0, b:   -8, a:    0, },\n            { r:  100, g:  128, b:  100, a: -128, },\n            { r:   64, g:   32, b:   32, a:  -64, },\n            { r:    8, g:    0, b:    8, a:    0, },\n          ];\n      }\n      break;\n    }\n    case 'u32':\n      // Keep all ranges within u8.\n      // prettier-ignore\n      return [\n        { r:   0, g:   0, b:   0, a:   0, },\n        { r:   0, g:   8, b:  16, a: 128, },\n        { r:   8, g:  16, b:  32, a:  64, },\n        { r:  16, g:  32, b:  64, a: 128, },\n        { r: 255, g: 254, b: 253, a: 252, },\n        { r: 255, g: 255, b: 255, a: 255, },\n        { r: 128, g:  64, b:  32, a:  16, },\n        { r:  64, g:  32, b:  16, a:   8, },\n        { r:  32, g:  16, b:   8, a:   0, },\n      ];\n    case 'i32':\n      // Keep all ranges i8\n      // prettier-ignore\n      return [\n        { r:    0, g:    0, b:    0, a:    0, },\n        { r:    0, g:   -8, b:   16, a:  127, },\n        { r:    8, g:   16, b:  -32, a:   64, },\n        { r:  -16, g:   32, b:   64, a: -128, },\n        { r:  127, g:  126, b:  125, a:  124, },\n        { r: -128, g: -127, b: -126, a: -125, },\n        { r:  127, g:  127, b:  127, a:  127, },\n        { r: -128, g: -128, b: -128, a: -128, },\n      ];\n    default:\n      unreachable(`unhandled shader type ${type}`);\n      break;\n  }\n  return [];\n}\n\ng.test('storage_texel_formats')\n  .desc('Test loading of texel formats')\n  .params(u => u.combineWithParams([...TexelFormats, { format: 'bgra8unorm', _shaderType: 'f32' }]))\n  .beforeAllSubcases(t => {\n    t.skipIf(!t.hasLanguageFeature('readonly_and_readwrite_storage_textures'));\n    if (t.params.format === 'bgra8unorm') {\n      t.selectDeviceOrSkipTestCase('bgra8unorm-storage');\n    } else {\n      t.skipIfTextureFormatNotUsableAsStorageTexture(t.params.format as GPUTextureFormat);\n    }\n  })\n  .fn(t => {\n    const { format, _shaderType } = t.params;\n    const values = shaderValues(format, _shaderType);\n\n    // To avoid rounding issues, unorm and snorm values are repacked in the shader.\n    let useType = _shaderType;\n    let assignValue = `v`;\n    if (format === 'bgra8unorm' || format === 'rgba8unorm') {\n      useType = 'u32';\n      assignValue = `vec4u(pack4x8unorm(v),0,0,0)`;\n    } else if (format === 'rgba8snorm') {\n      useType = 'u32';\n      assignValue = `vec4u(pack4x8snorm(v),0,0,0)`;\n    }\n    const wgsl = `\nrequires readonly_and_readwrite_storage_textures;\n\n@group(0) @binding(0)\nvar tex : texture_storage_1d<${format}, read>;\n\n@group(0) @binding(1)\nvar<storage, read_write> out : array<vec4<${useType}>>;\n\n@compute @workgroup_size(${values.length})\nfn main(@builtin(global_invocation_id) gid : vec3u) {\n  let v = textureLoad(tex, gid.x);\n  out[gid.x] = ${assignValue};\n}`;\n\n    const bytesPerRow = 256;\n    let bytesPerTexel = 4;\n    switch (format) {\n      case 'rgba16uint':\n      case 'rgba16sint':\n      case 'rgba16float':\n      case 'rg32uint':\n      case 'rg32sint':\n      case 'rg32float':\n        bytesPerTexel = 8;\n        break;\n      case 'rgba32uint':\n      case 'rgba32sint':\n      case 'rgba32float':\n        bytesPerTexel = 16;\n        break;\n      default:\n        break;\n    }\n\n    const textureSize: GPUExtent3D = {\n      width: bytesPerRow / bytesPerTexel,\n      height: 1,\n      depthOrArrayLayers: 1,\n    };\n    const texture = t.createTextureTracked({\n      format: format as GPUTextureFormat,\n      dimension: '1d',\n      size: textureSize,\n      mipLevelCount: 1,\n      usage: GPUTextureUsage.STORAGE_BINDING | GPUTextureUsage.COPY_DST,\n    });\n    const outputBuffer = t.makeBufferWithContents(\n      new Uint32Array([...iterRange(values.length * 4, x => 0)]),\n      GPUBufferUsage.COPY_SRC | GPUBufferUsage.COPY_DST | GPUBufferUsage.STORAGE\n    );\n    t.trackForCleanup(outputBuffer);\n\n    const transformed = values.flatMap(x => {\n      switch (format) {\n        case 'rgba8unorm':\n          return pack4x8unorm(x.r, x.g, x.b, x.a);\n        case 'bgra8unorm':\n          return pack4x8unorm(x.b, x.g, x.r, x.a);\n        case 'rgba8snorm':\n          return pack4x8snorm(x.r, x.g, x.b, x.a);\n        case 'r32uint':\n        case 'r32sint':\n          return x.r;\n        case 'rg32uint':\n        case 'rg32sint':\n          return [x.r, x.g];\n        case 'rgba32uint':\n        case 'rgba32sint':\n          return [x.r, x.g, x.b, x.a];\n        case 'rgba8uint':\n        case 'rgba8sint':\n          return (x.r & 0xff) | ((x.g & 0xff) << 8) | ((x.b & 0xff) << 16) | ((x.a & 0xff) << 24);\n        case 'rgba16uint':\n        case 'rgba16sint':\n          return [(x.r & 0xffff) | ((x.g & 0xffff) << 16), (x.b & 0xffff) | ((x.a & 0xffff) << 16)];\n        case 'r32float':\n          return numberToFloatBits(x.r, kFloat32Format);\n        case 'rg32float':\n          return [numberToFloatBits(x.r, kFloat32Format), numberToFloatBits(x.g, kFloat32Format)];\n        case 'rgba32float':\n          return [\n            numberToFloatBits(x.r, kFloat32Format),\n            numberToFloatBits(x.g, kFloat32Format),\n            numberToFloatBits(x.b, kFloat32Format),\n            numberToFloatBits(x.a, kFloat32Format),\n          ];\n        case 'rgba16float':\n          return [\n            (numberToFloatBits(x.r, kFloat16Format) & 0xffff) |\n              ((numberToFloatBits(x.g, kFloat16Format) & 0xffff) << 16),\n            (numberToFloatBits(x.b, kFloat16Format) & 0xffff) |\n              ((numberToFloatBits(x.a, kFloat16Format) & 0xffff) << 16),\n          ];\n        default:\n          unreachable(`unhandled format ${format}`);\n          break;\n      }\n      return 0;\n    });\n\n    const texelBuffer = t.makeBufferWithContents(\n      new Uint32Array([\n        ...iterRange(bytesPerRow, x => {\n          if (x < transformed.length) {\n            return transformed[x];\n          } else {\n            return 0;\n          }\n        }),\n      ]),\n      GPUBufferUsage.COPY_SRC | GPUBufferUsage.COPY_DST | GPUBufferUsage.STORAGE\n    );\n    t.trackForCleanup(texelBuffer);\n\n    const pipeline = t.device.createComputePipeline({\n      layout: 'auto',\n      compute: {\n        module: t.device.createShaderModule({\n          code: wgsl,\n        }),\n        entryPoint: 'main',\n      },\n    });\n    const bg = t.device.createBindGroup({\n      layout: pipeline.getBindGroupLayout(0),\n      entries: [\n        {\n          binding: 0,\n          resource: texture.createView({\n            format: format as GPUTextureFormat,\n            dimension: '1d',\n          }),\n        },\n        {\n          binding: 1,\n          resource: {\n            buffer: outputBuffer,\n          },\n        },\n      ],\n    });\n\n    const encoder = t.device.createCommandEncoder();\n    encoder.copyBufferToTexture(\n      {\n        buffer: texelBuffer,\n        offset: 0,\n        bytesPerRow,\n        rowsPerImage: 1,\n      },\n      { texture },\n      textureSize\n    );\n\n    const pass = encoder.beginComputePass();\n    pass.setPipeline(pipeline);\n    pass.setBindGroup(0, bg);\n    pass.dispatchWorkgroups(1, 1, 1);\n    pass.end();\n    t.queue.submit([encoder.finish()]);\n\n    const expected = new Uint32Array(\n      values.flatMap(x => {\n        switch (format) {\n          case 'r32uint':\n          case 'r32sint':\n            return [x.r, 0, 0, 1];\n          case 'rg32uint':\n          case 'rg32sint':\n            return [x.r, x.g, 0, 1];\n          case 'r32float':\n            return [\n              numberToFloatBits(x.r, kFloat32Format),\n              0,\n              0,\n              numberToFloatBits(1, kFloat32Format),\n            ];\n          case 'rg32float':\n            return [\n              numberToFloatBits(x.r, kFloat32Format),\n              numberToFloatBits(x.g, kFloat32Format),\n              0,\n              numberToFloatBits(1, kFloat32Format),\n            ];\n          case 'rgba32float':\n          case 'rgba16float':\n            return [\n              numberToFloatBits(x.r, kFloat32Format),\n              numberToFloatBits(x.g, kFloat32Format),\n              numberToFloatBits(x.b, kFloat32Format),\n              numberToFloatBits(x.a, kFloat32Format),\n            ];\n          case 'rgba8unorm':\n          case 'bgra8unorm':\n            return [pack4x8unorm(x.r, x.g, x.b, x.a), 0, 0, 0];\n          case 'rgba8snorm':\n            return [pack4x8snorm(x.r, x.g, x.b, x.a), 0, 0, 0];\n          default:\n            break;\n        }\n        return [x.r, x.g, x.b, x.a];\n      })\n    );\n    t.expectGPUBufferValuesEqual(outputBuffer, expected);\n  });\n"],"mappings":"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"}