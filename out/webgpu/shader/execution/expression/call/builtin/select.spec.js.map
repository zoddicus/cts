{"version":3,"file":"select.spec.js","names":["description","makeTestGroup","GPUTest","TypeVec","TypeBool","TypeF32","TypeF16","TypeI32","TypeU32","f32","f16","i32","u32","False","True","bool","vec2","vec3","vec4","abstractFloat","TypeAbstractFloat","run","allInputSources","abstractBuiltin","builtin","g","makeBool","n","dataType","b","type","constructor","af","f","h","i","u","test","specURL","desc","params","combine","beforeAllSubcases","t","component","selectDeviceOrSkipTestCase","requiredFeatures","skipIf","inputSource","fn","componentType","cons","c","map","v2a","v2b","v3a","v3b","v4a","v4b","overloads","scalar","cases","input","expected","overload","T","F","tests","a","boolType","x","y","z","w"],"sources":["../../../../../../../src/webgpu/shader/execution/expression/call/builtin/select.spec.ts"],"sourcesContent":["export const description = `\nExecution tests for the 'select' builtin function\n\nT is scalar, abstract numeric type, or vector\n@const fn select(f: T, t: T, cond: bool) -> T\nReturns t when cond is true, and f otherwise.\n\nT is scalar or abstract numeric type\n@const fn select(f: vecN<T>, t: vecN<T>, cond: vecN<bool>) -> vecN<T>\nComponent-wise selection. Result component i is evaluated as select(f[i],t[i],cond[i]).\n`;\n\nimport { makeTestGroup } from '../../../../../../common/framework/test_group.js';\nimport { GPUTest } from '../../../../../gpu_test.js';\nimport {\n  VectorType,\n  TypeVec,\n  TypeBool,\n  TypeF32,\n  TypeF16,\n  TypeI32,\n  TypeU32,\n  f32,\n  f16,\n  i32,\n  u32,\n  False,\n  True,\n  bool,\n  vec2,\n  vec3,\n  vec4,\n  abstractFloat,\n  TypeAbstractFloat,\n} from '../../../../../util/conversion.js';\nimport { CaseList } from '../../case.js';\nimport { run, allInputSources } from '../../expression.js';\n\nimport { abstractBuiltin, builtin } from './builtin.js';\n\nexport const g = makeTestGroup(GPUTest);\n\nfunction makeBool(n: number) {\n  return bool((n & 1) === 1);\n}\n\ntype scalarKind = 'b' | 'af' | 'f' | 'h' | 'i' | 'u';\n\nconst dataType = {\n  b: {\n    type: TypeBool,\n    constructor: makeBool,\n  },\n  af: {\n    type: TypeAbstractFloat,\n    constructor: abstractFloat,\n  },\n  f: {\n    type: TypeF32,\n    constructor: f32,\n  },\n  h: {\n    type: TypeF16,\n    constructor: f16,\n  },\n  i: {\n    type: TypeI32,\n    constructor: i32,\n  },\n  u: {\n    type: TypeU32,\n    constructor: u32,\n  },\n};\n\ng.test('scalar')\n  .specURL('https://www.w3.org/TR/WGSL/#logical-builtin-functions')\n  .desc(`scalar tests`)\n  .params(u =>\n    u\n      .combine('inputSource', allInputSources)\n      .combine('component', ['b', 'af', 'f', 'h', 'i', 'u'] as const)\n      .combine('overload', ['scalar', 'vec2', 'vec3', 'vec4'] as const)\n  )\n  .beforeAllSubcases(t => {\n    if (t.params.component === 'h') {\n      t.selectDeviceOrSkipTestCase({ requiredFeatures: ['shader-f16'] });\n    }\n    t.skipIf(t.params.component === 'af' && t.params.inputSource !== 'const');\n  })\n  .fn(async t => {\n    const componentType = dataType[t.params.component as scalarKind].type;\n    const cons = dataType[t.params.component as scalarKind].constructor;\n\n    // Create the scalar values that will be selected from, either as scalars\n    // or vectors.\n    //\n    // Each boolean will select between c[k] and c[k+4].  Those values must\n    // always compare as different.  The tricky case is boolean, where the parity\n    // has to be different, i.e. c[k]-c[k+4] must be odd.\n    const c = [0, 1, 2, 3, 5, 6, 7, 8].map(i => cons(i));\n    // Now form vectors that will have different components from each other.\n    const v2a = vec2(c[0], c[1]);\n    const v2b = vec2(c[4], c[5]);\n    const v3a = vec3(c[0], c[1], c[2]);\n    const v3b = vec3(c[4], c[5], c[6]);\n    const v4a = vec4(c[0], c[1], c[2], c[3]);\n    const v4b = vec4(c[4], c[5], c[6], c[7]);\n\n    const overloads = {\n      scalar: {\n        type: componentType,\n        cases: [\n          { input: [c[0], c[1], False], expected: c[0] },\n          { input: [c[0], c[1], True], expected: c[1] },\n        ],\n      },\n      vec2: {\n        type: TypeVec(2, componentType),\n        cases: [\n          { input: [v2a, v2b, False], expected: v2a },\n          { input: [v2a, v2b, True], expected: v2b },\n        ],\n      },\n      vec3: {\n        type: TypeVec(3, componentType),\n        cases: [\n          { input: [v3a, v3b, False], expected: v3a },\n          { input: [v3a, v3b, True], expected: v3b },\n        ],\n      },\n      vec4: {\n        type: TypeVec(4, componentType),\n        cases: [\n          { input: [v4a, v4b, False], expected: v4a },\n          { input: [v4a, v4b, True], expected: v4b },\n        ],\n      },\n    };\n    const overload = overloads[t.params.overload];\n\n    await run(\n      t,\n      t.params.component === 'af' ? abstractBuiltin('select') : builtin('select'),\n      [overload.type, overload.type, TypeBool],\n      overload.type,\n      t.params,\n      overload.cases\n    );\n  });\n\ng.test('vector')\n  .specURL('https://www.w3.org/TR/WGSL/#logical-builtin-functions')\n  .desc(`vector tests`)\n  .params(u =>\n    u\n      .combine('inputSource', allInputSources)\n      .combine('component', ['b', 'af', 'f', 'h', 'i', 'u'] as const)\n      .combine('overload', ['vec2', 'vec3', 'vec4'] as const)\n  )\n  .beforeAllSubcases(t => {\n    if (t.params.component === 'h') {\n      t.selectDeviceOrSkipTestCase({ requiredFeatures: ['shader-f16'] });\n    }\n    t.skipIf(t.params.component === 'af' && t.params.inputSource !== 'const');\n  })\n  .fn(async t => {\n    const componentType = dataType[t.params.component as scalarKind].type;\n    const cons = dataType[t.params.component as scalarKind].constructor;\n\n    // Create the scalar values that will be selected from.\n    //\n    // Each boolean will select between c[k] and c[k+4].  Those values must\n    // always compare as different.  The tricky case is boolean, where the parity\n    // has to be different, i.e. c[k]-c[k+4] must be odd.\n    const c = [0, 1, 2, 3, 5, 6, 7, 8].map(i => cons(i));\n    const T = True;\n    const F = False;\n\n    let tests: { dataType: VectorType; boolType: VectorType; cases: CaseList };\n\n    switch (t.params.overload) {\n      case 'vec2': {\n        const a = vec2(c[0], c[1]);\n        const b = vec2(c[4], c[5]);\n        tests = {\n          dataType: TypeVec(2, componentType),\n          boolType: TypeVec(2, TypeBool),\n          cases: [\n            { input: [a, b, vec2(F, F)], expected: vec2(a.x, a.y) },\n            { input: [a, b, vec2(F, T)], expected: vec2(a.x, b.y) },\n            { input: [a, b, vec2(T, F)], expected: vec2(b.x, a.y) },\n            { input: [a, b, vec2(T, T)], expected: vec2(b.x, b.y) },\n          ],\n        };\n        break;\n      }\n      case 'vec3': {\n        const a = vec3(c[0], c[1], c[2]);\n        const b = vec3(c[4], c[5], c[6]);\n        tests = {\n          dataType: TypeVec(3, componentType),\n          boolType: TypeVec(3, TypeBool),\n          cases: [\n            { input: [a, b, vec3(F, F, F)], expected: vec3(a.x, a.y, a.z) },\n            { input: [a, b, vec3(F, F, T)], expected: vec3(a.x, a.y, b.z) },\n            { input: [a, b, vec3(F, T, F)], expected: vec3(a.x, b.y, a.z) },\n            { input: [a, b, vec3(F, T, T)], expected: vec3(a.x, b.y, b.z) },\n            { input: [a, b, vec3(T, F, F)], expected: vec3(b.x, a.y, a.z) },\n            { input: [a, b, vec3(T, F, T)], expected: vec3(b.x, a.y, b.z) },\n            { input: [a, b, vec3(T, T, F)], expected: vec3(b.x, b.y, a.z) },\n            { input: [a, b, vec3(T, T, T)], expected: vec3(b.x, b.y, b.z) },\n          ],\n        };\n        break;\n      }\n      case 'vec4': {\n        const a = vec4(c[0], c[1], c[2], c[3]);\n        const b = vec4(c[4], c[5], c[6], c[7]);\n        tests = {\n          dataType: TypeVec(4, componentType),\n          boolType: TypeVec(4, TypeBool),\n          cases: [\n            { input: [a, b, vec4(F, F, F, F)], expected: vec4(a.x, a.y, a.z, a.w) },\n            { input: [a, b, vec4(F, F, F, T)], expected: vec4(a.x, a.y, a.z, b.w) },\n            { input: [a, b, vec4(F, F, T, F)], expected: vec4(a.x, a.y, b.z, a.w) },\n            { input: [a, b, vec4(F, F, T, T)], expected: vec4(a.x, a.y, b.z, b.w) },\n            { input: [a, b, vec4(F, T, F, F)], expected: vec4(a.x, b.y, a.z, a.w) },\n            { input: [a, b, vec4(F, T, F, T)], expected: vec4(a.x, b.y, a.z, b.w) },\n            { input: [a, b, vec4(F, T, T, F)], expected: vec4(a.x, b.y, b.z, a.w) },\n            { input: [a, b, vec4(F, T, T, T)], expected: vec4(a.x, b.y, b.z, b.w) },\n            { input: [a, b, vec4(T, F, F, F)], expected: vec4(b.x, a.y, a.z, a.w) },\n            { input: [a, b, vec4(T, F, F, T)], expected: vec4(b.x, a.y, a.z, b.w) },\n            { input: [a, b, vec4(T, F, T, F)], expected: vec4(b.x, a.y, b.z, a.w) },\n            { input: [a, b, vec4(T, F, T, T)], expected: vec4(b.x, a.y, b.z, b.w) },\n            { input: [a, b, vec4(T, T, F, F)], expected: vec4(b.x, b.y, a.z, a.w) },\n            { input: [a, b, vec4(T, T, F, T)], expected: vec4(b.x, b.y, a.z, b.w) },\n            { input: [a, b, vec4(T, T, T, F)], expected: vec4(b.x, b.y, b.z, a.w) },\n            { input: [a, b, vec4(T, T, T, T)], expected: vec4(b.x, b.y, b.z, b.w) },\n          ],\n        };\n        break;\n      }\n    }\n\n    await run(\n      t,\n      t.params.component === 'af' ? abstractBuiltin('select') : builtin('select'),\n      [tests.dataType, tests.dataType, tests.boolType],\n      tests.dataType,\n      t.params,\n      tests.cases\n    );\n  });\n"],"mappings":"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"}