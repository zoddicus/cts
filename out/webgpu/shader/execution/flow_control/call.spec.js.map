{"version":3,"file":"call.spec.js","names":["description","makeTestGroup","GPUTest","runFlowControlTest","g","test","desc","params","u","combine","fn","t","f","entrypoint","expect_order","extra"],"sources":["../../../../../src/webgpu/shader/execution/flow_control/call.spec.ts"],"sourcesContent":["export const description = `\nFlow control tests for function calls.\n`;\n\nimport { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { GPUTest } from '../../../gpu_test.js';\n\nimport { runFlowControlTest } from './harness.js';\n\nexport const g = makeTestGroup(GPUTest);\n\ng.test('call_basic')\n  .desc('Test that flow control enters a called function')\n  .params(u => u.combine('preventValueOptimizations', [true, false]))\n  .fn(t => {\n    runFlowControlTest(t, f => ({\n      entrypoint: `\n  ${f.expect_order(0)}\n  f();\n  ${f.expect_order(2)}\n`,\n      extra: `\nfn f() {\n  ${f.expect_order(1)}\n}`,\n    }));\n  });\n\ng.test('call_nested')\n  .desc('Test that flow control enters a nested function calls')\n  .params(u => u.combine('preventValueOptimizations', [true, false]))\n  .fn(t => {\n    runFlowControlTest(t, f => ({\n      entrypoint: `\n  ${f.expect_order(0)}\n  a();\n  ${f.expect_order(6)}\n`,\n      extra: `\nfn a() {\n  ${f.expect_order(1)}\n  b();\n  ${f.expect_order(5)}\n}\nfn b() {\n  ${f.expect_order(2)}\n  c();\n  ${f.expect_order(4)}\n}\nfn c() {\n  ${f.expect_order(3)}\n}`,\n    }));\n  });\n\ng.test('call_repeated')\n  .desc('Test that flow control enters a nested function calls')\n  .params(u => u.combine('preventValueOptimizations', [true, false]))\n  .fn(t => {\n    runFlowControlTest(t, f => ({\n      entrypoint: `\n  ${f.expect_order(0)}\n  a();\n  ${f.expect_order(10)}\n`,\n      extra: `\nfn a() {\n  ${f.expect_order(1)}\n  b();\n  ${f.expect_order(5)}\n  b();\n  ${f.expect_order(9)}\n}\nfn b() {\n  ${f.expect_order(2, 6)}\n  c();\n  ${f.expect_order(4, 8)}\n}\nfn c() {\n  ${f.expect_order(3, 7)}\n}`,\n    }));\n  });\n"],"mappings":"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"}