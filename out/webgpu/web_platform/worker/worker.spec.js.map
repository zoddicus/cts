{"version":3,"file":"worker.spec.js","names":["description","Fixture","makeTestGroup","assert","g","isNode","process","versions","node","undefined","test","desc","fn","t","skip","url","launchWorker","result","error"],"sources":["../../../../src/webgpu/web_platform/worker/worker.spec.ts"],"sourcesContent":["export const description = `\nTests WebGPU is available in a worker.\n\nNote: The CTS test can be run in a worker by passing in worker=1 as\na query parameter. This test is specifically to check that WebGPU\nis available in a worker.\n`;\n\nimport { Fixture } from '../../../common/framework/fixture.js';\nimport { makeTestGroup } from '../../../common/framework/test_group.js';\nimport { assert } from '../../../common/util/util.js';\n\nexport const g = makeTestGroup(Fixture);\n\nfunction isNode(): boolean {\n  return typeof process !== 'undefined' && process?.versions?.node !== undefined;\n}\n\ng.test('worker')\n  .desc(`test WebGPU is available in DedicatedWorkers and check for basic functionality`)\n  .fn(async t => {\n    if (isNode()) {\n      t.skip('node does not support 100% compatible workers');\n      return;\n    }\n    // Note: we load worker_launcher dynamically because ts-node support\n    // is using commonjs which doesn't support import.meta. Further,\n    // we need to put the url in a string add pass the string to import\n    // otherwise typescript tries to parse the file which again, fails.\n    // worker_launcher.js is excluded in node.tsconfig.json.\n    const url = './worker_launcher.js';\n    const { launchWorker } = await import(url);\n    const result = await launchWorker();\n    assert(result.error === undefined, `should be no error from worker but was: ${result.error}`);\n  });\n"],"mappings":";AAAA;AAAA,GAAA,OAAO,MAAMA,WAAW,GAAI;AAC5B;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,SAASC,OAAO,QAAQ,sCAAsC;AAC9D,SAASC,aAAa,QAAQ,yCAAyC;AACvE,SAASC,MAAM,QAAQ,8BAA8B;;AAErD,OAAO,MAAMC,CAAC,GAAGF,aAAa,CAACD,OAAO,CAAC;;AAEvC,SAASI,MAAM,GAAY;EACzB,OAAO,OAAOC,OAAO,KAAK,WAAW,IAAIA,OAAO,EAAEC,QAAQ,EAAEC,IAAI,KAAKC,SAAS;AAChF;;AAEAL,CAAC,CAACM,IAAI,CAAC,QAAQ,CAAC;AACbC,IAAI,CAAE,gFAA+E,CAAC;AACtFC,EAAE,CAAC,OAAMC,CAAC,KAAI;EACb,IAAIR,MAAM,EAAE,EAAE;IACZQ,CAAC,CAACC,IAAI,CAAC,+CAA+C,CAAC;IACvD;EACF;EACA;EACA;EACA;EACA;EACA;EACA,MAAMC,GAAG,GAAG,sBAAsB;EAClC,MAAM,EAAEC,YAAY,CAAC,CAAC,GAAG,MAAM,MAAM,CAACD,GAAG,CAAC;EAC1C,MAAME,MAAM,GAAG,MAAMD,YAAY,EAAE;EACnCb,MAAM,CAACc,MAAM,CAACC,KAAK,KAAKT,SAAS,EAAG,2CAA0CQ,MAAM,CAACC,KAAM,EAAC,CAAC;AAC/F,CAAC,CAAC"}