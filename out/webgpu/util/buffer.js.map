{"version":3,"file":"buffer.js","names":["memcpy","align","makeBufferWithContents","device","dataArray","usage","buffer","createBuffer","mappedAtCreation","size","byteLength","src","dst","getMappedRange","unmap"],"sources":["../../../src/webgpu/util/buffer.ts"],"sourcesContent":["import { memcpy, TypedArrayBufferView } from '../../common/util/util.js';\n\nimport { align } from './math.js';\n\n/**\n * Creates a buffer with the contents of some TypedArray.\n * The buffer size will always be aligned to 4 as we set mappedAtCreation === true when creating the\n * buffer.\n */\nexport function makeBufferWithContents(\n  device: GPUDevice,\n  dataArray: TypedArrayBufferView,\n  usage: GPUBufferUsageFlags\n): GPUBuffer {\n  const buffer = device.createBuffer({\n    mappedAtCreation: true,\n    size: align(dataArray.byteLength, 4),\n    usage,\n  });\n  memcpy({ src: dataArray }, { dst: buffer.getMappedRange() });\n  buffer.unmap();\n  return buffer;\n}\n"],"mappings":";;GAAA,SAASA,MAAM,QAA8B,2BAA2B,CAExE,SAASC,KAAK,QAAQ,WAAW;;AAEjC;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,sBAAsBA;AACpCC,MAAiB;AACjBC,SAA+B;AAC/BC,KAA0B;AACf;EACX,MAAMC,MAAM,GAAGH,MAAM,CAACI,YAAY,CAAC;IACjCC,gBAAgB,EAAE,IAAI;IACtBC,IAAI,EAAER,KAAK,CAACG,SAAS,CAACM,UAAU,EAAE,CAAC,CAAC;IACpCL;EACF,CAAC,CAAC;EACFL,MAAM,CAAC,EAAEW,GAAG,EAAEP,SAAS,CAAC,CAAC,EAAE,EAAEQ,GAAG,EAAEN,MAAM,CAACO,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;EAC5DP,MAAM,CAACQ,KAAK,CAAC,CAAC;EACd,OAAOR,MAAM;AACf"}