{"version":3,"file":"idl_test.js","names":["Fixture","getGPU","assert","IDLTest","init","rec","Promise","resolve","assertMember","act","exp","key","assertMemberCount","expKeys","Object","keys","actKeys","length"],"sources":["../../../src/webgpu/idl/idl_test.ts"],"sourcesContent":["import { Fixture } from '../../common/framework/fixture.js';\nimport { getGPU } from '../../common/util/navigator_gpu.js';\nimport { assert } from '../../common/util/util.js';\n\ninterface UnknownObject {\n  [k: string]: unknown;\n}\n\n/**\n * Base fixture for testing the exposed interface is correct (without actually using WebGPU).\n */\nexport class IDLTest extends Fixture {\n  override init(): Promise<void> {\n    // Ensure the GPU provider is initialized\n    getGPU(this.rec);\n    return Promise.resolve();\n  }\n\n  /**\n   * Asserts that a member of an IDL interface has the expected value.\n   */\n  assertMember(act: UnknownObject, exp: UnknownObject, key: string) {\n    assert(key in act, () => `Expected key ${key} missing`);\n    assert(act[key] === exp[key], () => `Value of [${key}] was ${act[key]}, expected ${exp[key]}`);\n  }\n\n  /**\n   * Asserts that an IDL interface has the same number of keys as the\n   *\n   * MAINTENANCE_TODO: add a way to check for the types of keys with unknown values, like methods and attributes\n   * MAINTENANCE_TODO: handle extensions\n   */\n  assertMemberCount(act: UnknownObject, exp: UnknownObject) {\n    const expKeys = Object.keys(exp);\n    const actKeys = Object.keys(act);\n    assert(\n      actKeys.length === expKeys.length,\n      () => `Had ${actKeys.length} keys, expected ${expKeys.length}`\n    );\n  }\n}\n"],"mappings":";;GAAA,SAASA,OAAO,QAAQ,mCAAmC,CAC3D,SAASC,MAAM,QAAQ,oCAAoC,CAC3D,SAASC,MAAM,QAAQ,2BAA2B;;;;;;AAMlD;AACA;AACA;AACA,OAAO,MAAMC,OAAO,SAASH,OAAO,CAAC;EAC1BI,IAAIA,CAAA,EAAkB;IAC7B;IACAH,MAAM,CAAC,IAAI,CAACI,GAAG,CAAC;IAChB,OAAOC,OAAO,CAACC,OAAO,CAAC,CAAC;EAC1B;;EAEA;AACF;AACA;EACEC,YAAYA,CAACC,GAAkB,EAAEC,GAAkB,EAAEC,GAAW,EAAE;IAChET,MAAM,CAACS,GAAG,IAAIF,GAAG,EAAE,MAAO,gBAAeE,GAAI,UAAS,CAAC;IACvDT,MAAM,CAACO,GAAG,CAACE,GAAG,CAAC,KAAKD,GAAG,CAACC,GAAG,CAAC,EAAE,MAAO,aAAYA,GAAI,SAAQF,GAAG,CAACE,GAAG,CAAE,cAAaD,GAAG,CAACC,GAAG,CAAE,EAAC,CAAC;EAChG;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEC,iBAAiBA,CAACH,GAAkB,EAAEC,GAAkB,EAAE;IACxD,MAAMG,OAAO,GAAGC,MAAM,CAACC,IAAI,CAACL,GAAG,CAAC;IAChC,MAAMM,OAAO,GAAGF,MAAM,CAACC,IAAI,CAACN,GAAG,CAAC;IAChCP,MAAM;MACJc,OAAO,CAACC,MAAM,KAAKJ,OAAO,CAACI,MAAM;MACjC,MAAO,OAAMD,OAAO,CAACC,MAAO,mBAAkBJ,OAAO,CAACI,MAAO;IAC/D,CAAC;EACH;AACF"}