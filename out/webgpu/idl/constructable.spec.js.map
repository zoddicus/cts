{"version":3,"file":"constructable.spec.js","names":["description","makeTestGroup","IDLTest","g","test","desc","params","u","combine","fn","t","errorType","Ctor","globalThis","msg","error","expect","message","pipelineErrorOptions","reason","undefined","options","GPUPipelineError","expectedMsg","GPUValidationError","event","GPUUncapturedErrorEvent"],"sources":["../../../src/webgpu/idl/constructable.spec.ts"],"sourcesContent":["export const description = `\nTest that constructable WebGPU objects are actually constructable.\n`;\n\nimport { makeTestGroup } from './../../common/framework/test_group.js';\nimport { IDLTest } from './idl_test.js';\n\nexport const g = makeTestGroup(IDLTest);\n\ng.test('gpu_errors')\n  .desc('tests that GPUErrors are constructable')\n  .params(u =>\n    u.combine('errorType', [\n      'GPUInternalError',\n      'GPUOutOfMemoryError',\n      'GPUValidationError',\n    ] as const)\n  )\n  .fn(t => {\n    const { errorType } = t.params;\n    const Ctor = globalThis[errorType];\n    const msg = 'this is a test';\n    const error = new Ctor(msg);\n    t.expect(error.message === msg);\n  });\n\nconst pipelineErrorOptions: GPUPipelineErrorInit[] = [\n  { reason: 'validation' },\n  { reason: 'internal' },\n];\n\ng.test('pipeline_errors')\n  .desc('tests that GPUPipelineError is constructable')\n  .params(u =>\n    u //\n      .combine('msg', [undefined, 'some msg'])\n      .combine('options', pipelineErrorOptions)\n  )\n  .fn(t => {\n    const { msg, options } = t.params;\n    const error = new GPUPipelineError(msg, options);\n    const expectedMsg = msg || '';\n    t.expect(error.message === expectedMsg);\n    t.expect(error.reason === options.reason);\n  });\n\ng.test('uncaptured_error_event')\n  .desc('tests that GPUUncapturedErrorEvent is constructable')\n  .fn(t => {\n    const msg = 'this is a test';\n    const error = new GPUValidationError(msg);\n    const event = new GPUUncapturedErrorEvent('uncapturedError', { error });\n    t.expect(event.error === error);\n  });\n"],"mappings":";;GAAA,OAAO,MAAMA,WAAW,GAAI;AAC5B;AACA,CAAC,CAED,SAASC,aAAa,QAAQ,wCAAwC;AACtE,SAASC,OAAO,QAAQ,eAAe;;AAEvC,OAAO,MAAMC,CAAC,GAAGF,aAAa,CAACC,OAAO,CAAC;;AAEvCC,CAAC,CAACC,IAAI,CAAC,YAAY,CAAC;AACjBC,IAAI,CAAC,wCAAwC,CAAC;AAC9CC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC,CAACC,OAAO,CAAC,WAAW,EAAE;AACrB,kBAAkB;AAClB,qBAAqB;AACrB,oBAAoB;AACZ;AACZ,CAAC;AACAC,EAAE,CAAC,CAAAC,CAAC,KAAI;EACP,MAAM,EAAEC,SAAS,CAAC,CAAC,GAAGD,CAAC,CAACJ,MAAM;EAC9B,MAAMM,IAAI,GAAGC,UAAU,CAACF,SAAS,CAAC;EAClC,MAAMG,GAAG,GAAG,gBAAgB;EAC5B,MAAMC,KAAK,GAAG,IAAIH,IAAI,CAACE,GAAG,CAAC;EAC3BJ,CAAC,CAACM,MAAM,CAACD,KAAK,CAACE,OAAO,KAAKH,GAAG,CAAC;AACjC,CAAC,CAAC;;AAEJ,MAAMI,oBAA4C,GAAG;AACnD,EAAEC,MAAM,EAAE,YAAY,CAAC,CAAC;AACxB,EAAEA,MAAM,EAAE,UAAU,CAAC,CAAC,CACvB;;;AAEDhB,CAAC,CAACC,IAAI,CAAC,iBAAiB,CAAC;AACtBC,IAAI,CAAC,8CAA8C,CAAC;AACpDC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC,CAAC;AAAA,CACCC,OAAO,CAAC,KAAK,EAAE,CAACY,SAAS,EAAE,UAAU,CAAC,CAAC;AACvCZ,OAAO,CAAC,SAAS,EAAEU,oBAAoB;AAC5C,CAAC;AACAT,EAAE,CAAC,CAAAC,CAAC,KAAI;EACP,MAAM,EAAEI,GAAG,EAAEO,OAAO,CAAC,CAAC,GAAGX,CAAC,CAACJ,MAAM;EACjC,MAAMS,KAAK,GAAG,IAAIO,gBAAgB,CAACR,GAAG,EAAEO,OAAO,CAAC;EAChD,MAAME,WAAW,GAAGT,GAAG,IAAI,EAAE;EAC7BJ,CAAC,CAACM,MAAM,CAACD,KAAK,CAACE,OAAO,KAAKM,WAAW,CAAC;EACvCb,CAAC,CAACM,MAAM,CAACD,KAAK,CAACI,MAAM,KAAKE,OAAO,CAACF,MAAM,CAAC;AAC3C,CAAC,CAAC;;AAEJhB,CAAC,CAACC,IAAI,CAAC,wBAAwB,CAAC;AAC7BC,IAAI,CAAC,qDAAqD,CAAC;AAC3DI,EAAE,CAAC,CAAAC,CAAC,KAAI;EACP,MAAMI,GAAG,GAAG,gBAAgB;EAC5B,MAAMC,KAAK,GAAG,IAAIS,kBAAkB,CAACV,GAAG,CAAC;EACzC,MAAMW,KAAK,GAAG,IAAIC,uBAAuB,CAAC,iBAAiB,EAAE,EAAEX,KAAK,CAAC,CAAC,CAAC;EACvEL,CAAC,CAACM,MAAM,CAACS,KAAK,CAACV,KAAK,KAAKA,KAAK,CAAC;AACjC,CAAC,CAAC"}