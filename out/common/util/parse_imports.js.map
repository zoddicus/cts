{"version":3,"file":"parse_imports.js","names":["parseImports","path","content","out","importRE","importMatch","exec","importPath","replace","push","joinPath","a","b","aParts","split","bParts","pop","bStart","length","slice","join"],"sources":["../../../src/common/util/parse_imports.ts"],"sourcesContent":["/**\n * Parses all the paths of the typescript `import` statements from content\n * @param path the current path of the file\n * @param content the file content\n * @returns the list of import paths\n */\nexport function parseImports(path: string, content: string): string[] {\n  const out: string[] = [];\n  const importRE = /^import\\s[^'\"]*(['\"])([./\\w]*)(\\1);/gm;\n  let importMatch: RegExpMatchArray | null;\n  while ((importMatch = importRE.exec(content))) {\n    const importPath = importMatch[2].replace(`'`, '').replace(`\"`, '');\n    out.push(joinPath(path, importPath));\n  }\n  return out;\n}\n\nfunction joinPath(a: string, b: string): string {\n  const aParts = a.split('/');\n  const bParts = b.split('/');\n  aParts.pop(); // remove file\n  let bStart = 0;\n  while (aParts.length > 0) {\n    switch (bParts[bStart]) {\n      case '.':\n        bStart++;\n        continue;\n      case '..':\n        aParts.pop();\n        bStart++;\n        continue;\n    }\n    break;\n  }\n  return [...aParts, ...bParts.slice(bStart)].join('/');\n}\n"],"mappings":";;IAAA;AACA;AACA;AACA;AACA;AACA,GACA,OAAO,SAASA,YAAYA,CAACC,IAAY,EAAEC,OAAe,EAAY,CACpE,MAAMC,GAAa,GAAG,EAAE;EACxB,MAAMC,QAAQ,GAAG,uCAAuC;EACxD,IAAIC,WAAoC;EACxC,OAAQA,WAAW,GAAGD,QAAQ,CAACE,IAAI,CAACJ,OAAO,CAAC,EAAG;IAC7C,MAAMK,UAAU,GAAGF,WAAW,CAAC,CAAC,CAAC,CAACG,OAAO,CAAE,GAAE,EAAE,EAAE,CAAC,CAACA,OAAO,CAAE,GAAE,EAAE,EAAE,CAAC;IACnEL,GAAG,CAACM,IAAI,CAACC,QAAQ,CAACT,IAAI,EAAEM,UAAU,CAAC,CAAC;EACtC;EACA,OAAOJ,GAAG;AACZ;;AAEA,SAASO,QAAQA,CAACC,CAAS,EAAEC,CAAS,EAAU;EAC9C,MAAMC,MAAM,GAAGF,CAAC,CAACG,KAAK,CAAC,GAAG,CAAC;EAC3B,MAAMC,MAAM,GAAGH,CAAC,CAACE,KAAK,CAAC,GAAG,CAAC;EAC3BD,MAAM,CAACG,GAAG,CAAC,CAAC,CAAC,CAAC;EACd,IAAIC,MAAM,GAAG,CAAC;EACd,OAAOJ,MAAM,CAACK,MAAM,GAAG,CAAC,EAAE;IACxB,QAAQH,MAAM,CAACE,MAAM,CAAC;MACpB,KAAK,GAAG;QACNA,MAAM,EAAE;QACR;MACF,KAAK,IAAI;QACPJ,MAAM,CAACG,GAAG,CAAC,CAAC;QACZC,MAAM,EAAE;QACR;IACJ;IACA;EACF;EACA,OAAO,CAAC,GAAGJ,MAAM,EAAE,GAAGE,MAAM,CAACI,KAAK,CAACF,MAAM,CAAC,CAAC,CAACG,IAAI,CAAC,GAAG,CAAC;AACvD"}