{"version":3,"file":"check_contents.spec.js","names":["description","Fixture","makeTestGroup","checkElementsEqual","F","test","substr","result","undefined","expect","message","indexOf","g","fn","t","shouldThrow","Uint8Array","Uint16Array","Uint32Array","Float32Array","actual","exp","i","Int32Array","Float64Array"],"sources":["../../src/unittests/check_contents.spec.ts"],"sourcesContent":["export const description = `Unit tests for check_contents`;\n\nimport { Fixture } from '../common/framework/fixture.js';\nimport { makeTestGroup } from '../common/internal/test_group.js';\nimport { ErrorWithExtra } from '../common/util/util.js';\nimport { checkElementsEqual } from '../webgpu/util/check_contents.js';\n\nclass F extends Fixture {\n  test(substr: undefined | string, result: undefined | ErrorWithExtra) {\n    if (substr === undefined) {\n      this.expect(result === undefined, result?.message);\n    } else {\n      this.expect(result !== undefined && result.message.indexOf(substr) !== -1, result?.message);\n    }\n  }\n}\n\nexport const g = makeTestGroup(F);\n\ng.test('checkElementsEqual').fn(t => {\n  t.shouldThrow('Error', () => checkElementsEqual(new Uint8Array(), new Uint16Array()));\n  t.shouldThrow('Error', () => checkElementsEqual(new Uint32Array(), new Float32Array()));\n  t.shouldThrow('Error', () => checkElementsEqual(new Uint8Array([]), new Uint8Array([0])));\n  t.shouldThrow('Error', () => checkElementsEqual(new Uint8Array([0]), new Uint8Array([])));\n  {\n    t.test(undefined, checkElementsEqual(new Uint8Array([]), new Uint8Array([])));\n    t.test(undefined, checkElementsEqual(new Uint8Array([0]), new Uint8Array([0])));\n    t.test(undefined, checkElementsEqual(new Uint8Array([1]), new Uint8Array([1])));\n    t.test(\n      `\n Starting at index 0:\n   actual == 0x: 00\n   failed ->     xx\n expected ==     01`,\n      checkElementsEqual(new Uint8Array([0]), new Uint8Array([1]))\n    );\n    t.test(\n      'expected ==     01 02 01',\n      checkElementsEqual(new Uint8Array([1, 1, 1]), new Uint8Array([1, 2, 1]))\n    );\n  }\n  {\n    const actual = new Uint8Array(280);\n    const exp = new Uint8Array(280);\n    for (let i = 2; i < 20; ++i) actual[i] = i - 4;\n    t.test(\n      '00 fe ff 00 01 02 03 04 05 06 07 08 09 0a 0b 0c 0d 0e 0f 00',\n      checkElementsEqual(actual, exp)\n    );\n    for (let i = 2; i < 280; ++i) actual[i] = i - 4;\n    t.test('Starting at index 1:', checkElementsEqual(actual, exp));\n    for (let i = 0; i < 2; ++i) actual[i] = i - 4;\n    t.test('Starting at index 0:', checkElementsEqual(actual, exp));\n  }\n  {\n    const actual = new Int32Array(30);\n    const exp = new Int32Array(30);\n    for (let i = 2; i < 7; ++i) actual[i] = i - 3;\n    t.test('00000002 00000003 00000000\\n', checkElementsEqual(actual, exp));\n    for (let i = 2; i < 30; ++i) actual[i] = i - 3;\n    t.test('00000000 00000000 ...', checkElementsEqual(actual, exp));\n  }\n  {\n    const actual = new Float64Array(30);\n    const exp = new Float64Array(30);\n    for (let i = 2; i < 7; ++i) actual[i] = (i - 4) * 1e100;\n    t.test('2.000e+100 0.000\\n', checkElementsEqual(actual, exp));\n    for (let i = 2; i < 280; ++i) actual[i] = (i - 4) * 1e100;\n    t.test('6.000e+100 7.000e+100 ...', checkElementsEqual(actual, exp));\n  }\n});\n"],"mappings":"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"}