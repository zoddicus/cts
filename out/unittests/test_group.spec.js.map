{"version":3,"file":"test_group.spec.js","names":["description","makeTestGroup","makeTestGroupForUnitTesting","assert","TestGroupTest","UnitTest","g","test","fn","t0","seen","count","t","paramsSimple","a","run","expect","Counter","doNestedThrow1","Error","doNestedThrow2","fail","res","search","size","logs","values","undefined","some","l","toJSON","length","shouldThrow","validate","builder","params","u","expandWithParams","b","_b","badChars","Array","from","char","name","message","x","JSON","stringify","badChar","paramsSubcasesOnly","combineWithParams","gen","ret","beginSubcases","result","every","v","status","desc","combine","allSkip","skipIf","do","expectedStatus","useSubcases","useDOMException","b1","b2","DOMException","TypeError","shouldReject"],"sources":["../../src/unittests/test_group.spec.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/require-await */\nexport const description = `\nUnit tests for TestGroup.\n`;\n\nimport { Fixture } from '../common/framework/fixture.js';\nimport { makeTestGroup } from '../common/framework/test_group.js';\nimport { makeTestGroupForUnitTesting } from '../common/internal/test_group.js';\nimport { assert } from '../common/util/util.js';\n\nimport { TestGroupTest } from './test_group_test.js';\nimport { UnitTest } from './unit_test.js';\n\nexport const g = makeTestGroup(TestGroupTest);\n\ng.test('UnitTest_fixture').fn(async t0 => {\n  let seen = 0;\n  function count(t: Fixture): void {\n    seen++;\n  }\n\n  const g = makeTestGroupForUnitTesting(UnitTest);\n\n  g.test('test').fn(count);\n  g.test('testp')\n    .paramsSimple([{ a: 1 }])\n    .fn(count);\n\n  await t0.run(g);\n  t0.expect(seen === 2);\n});\n\ng.test('custom_fixture').fn(async t0 => {\n  let seen = 0;\n  class Counter extends UnitTest {\n    count(): void {\n      seen++;\n    }\n  }\n\n  const g = makeTestGroupForUnitTesting(Counter);\n\n  g.test('test').fn(t => {\n    t.count();\n  });\n  g.test('testp')\n    .paramsSimple([{ a: 1 }])\n    .fn(t => {\n      t.count();\n    });\n\n  await t0.run(g);\n  t0.expect(seen === 2);\n});\n\ng.test('stack').fn(async t0 => {\n  const g = makeTestGroupForUnitTesting(UnitTest);\n\n  const doNestedThrow1 = () => {\n    throw new Error('goodbye');\n  };\n\n  const doNestedThrow2 = () => doNestedThrow1();\n\n  g.test('fail').fn(t => {\n    t.fail();\n  });\n  g.test('throw').fn(t => {\n    throw new Error('hello');\n  });\n  g.test('throw_nested').fn(t => {\n    doNestedThrow2();\n  });\n\n  const res = await t0.run(g);\n\n  const search = /unittests[/\\\\]test_group\\.spec\\.[tj]s/;\n  t0.expect(res.size > 0);\n  for (const { logs } of res.values()) {\n    assert(logs !== undefined, 'expected logs');\n    t0.expect(logs.some(l => search.test(l.toJSON())));\n    t0.expect(search.test(logs[logs.length - 1].toJSON()));\n  }\n});\n\ng.test('no_fn').fn(t => {\n  const g = makeTestGroupForUnitTesting(UnitTest);\n\n  g.test('missing');\n\n  t.shouldThrow('Error', () => {\n    g.validate();\n  });\n});\n\ng.test('duplicate_test_name').fn(t => {\n  const g = makeTestGroupForUnitTesting(UnitTest);\n  g.test('abc').fn(() => {});\n\n  t.shouldThrow('Error', () => {\n    g.test('abc').fn(() => {});\n  });\n});\n\ng.test('duplicate_test_params,none').fn(() => {\n  {\n    const g = makeTestGroupForUnitTesting(UnitTest);\n    g.test('abc')\n      .paramsSimple([])\n      .fn(() => {});\n    g.validate();\n  }\n\n  {\n    const g = makeTestGroupForUnitTesting(UnitTest);\n    g.test('abc').fn(() => {});\n    g.validate();\n  }\n\n  {\n    const g = makeTestGroupForUnitTesting(UnitTest);\n    g.test('abc')\n      .paramsSimple([\n        { a: 1 }, //\n      ])\n      .fn(() => {});\n    g.validate();\n  }\n});\n\ng.test('duplicate_test_params,basic').fn(t => {\n  {\n    const g = makeTestGroupForUnitTesting(UnitTest);\n    const builder = g.test('abc');\n    t.shouldThrow('Error', () => {\n      builder.paramsSimple([\n        { a: 1 }, //\n        { a: 1 },\n      ]);\n      g.validate();\n    });\n  }\n  {\n    const g = makeTestGroupForUnitTesting(UnitTest);\n    g.test('abc')\n      .params(u =>\n        u.expandWithParams(() => [\n          { a: 1 }, //\n          { a: 1 },\n        ])\n      )\n      .fn(() => {});\n    t.shouldThrow('Error', () => {\n      g.validate();\n    });\n  }\n  {\n    const g = makeTestGroupForUnitTesting(UnitTest);\n    g.test('abc')\n      .paramsSimple([\n        { a: 1, b: 3 }, //\n        { b: 3, a: 1 },\n      ])\n      .fn(() => {});\n    t.shouldThrow('Error', () => {\n      g.validate();\n    });\n  }\n});\n\ng.test('duplicate_test_params,with_different_private_params').fn(t => {\n  {\n    const g = makeTestGroupForUnitTesting(UnitTest);\n    const builder = g.test('abc');\n    t.shouldThrow('Error', () => {\n      builder.paramsSimple([\n        { a: 1, _b: 1 }, //\n        { a: 1, _b: 2 },\n      ]);\n    });\n  }\n  {\n    const g = makeTestGroupForUnitTesting(UnitTest);\n    g.test('abc')\n      .params(u =>\n        u.expandWithParams(() => [\n          { a: 1, _b: 1 }, //\n          { a: 1, _b: 2 },\n        ])\n      )\n      .fn(() => {});\n    t.shouldThrow('Error', () => {\n      g.validate();\n    });\n  }\n});\n\ng.test('invalid_test_name').fn(t => {\n  const g = makeTestGroupForUnitTesting(UnitTest);\n\n  const badChars = Array.from('\"`~@#$+=\\\\|!^&*[]<>{}-\\'. ');\n  for (const char of badChars) {\n    const name = 'a' + char + 'b';\n    t.shouldThrow(\n      'Error',\n      () => {\n        g.test(name).fn(() => {});\n      },\n      { message: name }\n    );\n  }\n});\n\ng.test('param_value,valid').fn(() => {\n  const g = makeTestGroup(UnitTest);\n  g.test('a').paramsSimple([{ x: JSON.stringify({ a: 1, b: 2 }) }]);\n});\n\ng.test('param_value,invalid').fn(t => {\n  for (const badChar of ';=*') {\n    const g = makeTestGroupForUnitTesting(UnitTest);\n    const builder = g.test('a');\n    t.shouldThrow('Error', () => {\n      builder.paramsSimple([{ badChar }]);\n    });\n  }\n});\n\ng.test('subcases').fn(async t0 => {\n  const g = makeTestGroupForUnitTesting(UnitTest);\n  g.test('a')\n    .paramsSubcasesOnly(u =>\n      u //\n        .combineWithParams([{ a: 1 }])\n    )\n    .fn(t => {\n      t.expect(t.params.a === 1, 'a must be 1');\n    });\n\n  function* gen({ a, b }: { a?: number; b?: number }) {\n    if (b === 2) {\n      yield { ret: 2 };\n    } else if (a === 1) {\n      yield { ret: 1 };\n    } else {\n      yield { ret: -1 };\n    }\n  }\n  g.test('b')\n    .params(u =>\n      u\n        .combineWithParams([{ a: 1 }, { b: 2 }])\n        .beginSubcases()\n        .expandWithParams(gen)\n    )\n    .fn(t => {\n      const { a, b, ret } = t.params;\n      t.expect((a === 1 && ret === 1) || (b === 2 && ret === 2));\n    });\n\n  const result = await t0.run(g);\n  t0.expect(Array.from(result.values()).every(v => v.status === 'pass'));\n});\n\ng.test('subcases,skip')\n  .desc(\n    'If all tests are skipped then status is \"skip\". If at least one test passed, status is \"pass\"'\n  )\n  .params(u => u.combine('allSkip', [false, true]))\n  .fn(async t0 => {\n    const { allSkip } = t0.params;\n    const g = makeTestGroupForUnitTesting(UnitTest);\n    g.test('a')\n      .params(u => u.beginSubcases().combine('do', ['pass', 'skip', 'pass']))\n      .fn(t => {\n        t.skipIf(allSkip || t.params.do === 'skip');\n      });\n    const result = await t0.run(g);\n    const values = Array.from(result.values());\n    t0.expect(values.length === 1);\n    const expectedStatus = allSkip ? 'skip' : 'pass';\n    t0.expect(\n      values[0].status === expectedStatus,\n      `expect: ${values[0].status} === ${expectedStatus}}, allSkip: ${allSkip}`\n    );\n  });\n\ng.test('exceptions')\n  .params(u =>\n    u\n      .combine('useSubcases', [false, true]) //\n      .combine('useDOMException', [false, true])\n  )\n  .fn(async t0 => {\n    const { useSubcases, useDOMException } = t0.params;\n    const g = makeTestGroupForUnitTesting(UnitTest);\n\n    const b1 = g.test('a');\n    let b2;\n    if (useSubcases) {\n      b2 = b1.paramsSubcasesOnly(u => u);\n    } else {\n      b2 = b1.params(u => u);\n    }\n    b2.fn(t => {\n      if (useDOMException) {\n        throw new DOMException('Message!', 'Name!');\n      } else {\n        throw new Error('Message!');\n      }\n    });\n\n    const result = await t0.run(g);\n    const values = Array.from(result.values());\n    t0.expect(values.length === 1);\n    t0.expect(values[0].status === 'fail');\n  });\n\ng.test('throws').fn(async t0 => {\n  const g = makeTestGroupForUnitTesting(UnitTest);\n\n  g.test('a').fn(t => {\n    throw new Error();\n  });\n\n  const result = await t0.run(g);\n  const values = Array.from(result.values());\n  t0.expect(values.length === 1);\n  t0.expect(values[0].status === 'fail');\n});\n\ng.test('shouldThrow').fn(async t0 => {\n  t0.shouldThrow('TypeError', () => {\n    throw new TypeError();\n  });\n\n  const g = makeTestGroupForUnitTesting(UnitTest);\n\n  g.test('a').fn(t => {\n    t.shouldThrow('Error', () => {\n      throw new TypeError();\n    });\n  });\n\n  const result = await t0.run(g);\n  const values = Array.from(result.values());\n  t0.expect(values.length === 1);\n  t0.expect(values[0].status === 'fail');\n});\n\ng.test('shouldReject').fn(async t0 => {\n  t0.shouldReject(\n    'TypeError',\n    (async () => {\n      throw new TypeError();\n    })()\n  );\n\n  const g = makeTestGroupForUnitTesting(UnitTest);\n\n  g.test('a').fn(t => {\n    t.shouldReject(\n      'Error',\n      (async () => {\n        throw new TypeError();\n      })()\n    );\n  });\n\n  const result = await t0.run(g);\n  // Fails even though shouldReject doesn't fail until after the test function ends\n  const values = Array.from(result.values());\n  t0.expect(values.length === 1);\n  t0.expect(values[0].status === 'fail');\n});\n"],"mappings":"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"}